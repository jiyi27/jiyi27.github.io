<!DOCTYPE html>
<html lang="en">
<head>
  
    
    <title>排查实验室电脑无法访问一些网站 :: 为霜的博客</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="首先可以联网, 谷歌和微软邮箱等其他的一些网站都可访问, 但是访问油管的时候总是会超时,
首先想到了是 DNS 服务器的问题, 尝试把电脑的 DNS server 改为 8.8.8.8, 可惜需要管理员权限, 失败
后来无聊想着看看解析出来 youtube.com 的实际ip是什么, 使用 nklookup 查了一下, (大概这样, 没在实验室)
❯ nslookup youtube.com Server:	192.168.2.1 Address:	192.168.100.1#53 Non-authoritative answer: Name:	youtube.com Address: 142.251.40.206 于是访问 142.251.40.206
❯ wget -O- 142.251.40.206 --2023-11-22 22:23:53-- http://142.251.40.206/ Connecting to 142.251.40.206:80... connected. HTTP request sent, awaiting response... 301 Moved Permanently Location: http://www.google.com/ [following] --2023-11-22 22:23:53-- http://www.google.com/ Resolving www.google.com (www.google.com)... 142.250.80.36 可以看到被重定向到了谷歌页面, 当时在实验室也是这种情况, 查了一下, 这确实是正确的地址, 只是谷歌给重定向了, 所以不是DNS的问题, 那应该就是防火墙的问题, 下次去实验室再看看,
" />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://blog.jiyi27.com/posts/bugs/008-computer-lab-cannot-access-youtube/" />





  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/categories.min.3202f75cbb294747099af3850a68a09ee94b3ce505fc39e134692d90ff0a9b2a.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/code.min.dd73d157e77e82a3dc1cb06ba424cf6cc6811af0bb604ad6c68e70faf2439c8a.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/fonts.min.4881f0c525f3ce2a1864fb6e96676396cebe1e6fcef1933e8e1dde7041004fb5.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/main.min.3fb8954e26342ad3afabb4525959bfec6f9fc0d6929f0dda738ddeee30211690.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/menu.min.8cee75f73b9f9b1e40bd0dd53e6e770156b08bbfe1c579cd256c3f6cd3b6d32b.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/post.min.014a50745fbdd41d5f420a3e288730d5af4b7d90344dc6211d0e50c368b5b303.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/prism.min.b958d3d7c6c67361b945f9062d07d403422604b3d2cd33f93b88d41ed0ba634d.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/term.min.94de320c1b850e126e6d2c88a7c90acf58bb1313f0ea14a14cda2a42f2a88db2.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">


<link rel="stylesheet" href="https://blog.jiyi27.com/terminal.css">




<link rel="shortcut icon" href="https://blog.jiyi27.com/favicon.png">
<link rel="apple-touch-icon" href="https://blog.jiyi27.com/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="排查实验室电脑无法访问一些网站">
<meta property="og:description" content="首先可以联网, 谷歌和微软邮箱等其他的一些网站都可访问, 但是访问油管的时候总是会超时,
首先想到了是 DNS 服务器的问题, 尝试把电脑的 DNS server 改为 8.8.8.8, 可惜需要管理员权限, 失败
后来无聊想着看看解析出来 youtube.com 的实际ip是什么, 使用 nklookup 查了一下, (大概这样, 没在实验室)
❯ nslookup youtube.com Server:	192.168.2.1 Address:	192.168.100.1#53 Non-authoritative answer: Name:	youtube.com Address: 142.251.40.206 于是访问 142.251.40.206
❯ wget -O- 142.251.40.206 --2023-11-22 22:23:53-- http://142.251.40.206/ Connecting to 142.251.40.206:80... connected. HTTP request sent, awaiting response... 301 Moved Permanently Location: http://www.google.com/ [following] --2023-11-22 22:23:53-- http://www.google.com/ Resolving www.google.com (www.google.com)... 142.250.80.36 可以看到被重定向到了谷歌页面, 当时在实验室也是这种情况, 查了一下, 这确实是正确的地址, 只是谷歌给重定向了, 所以不是DNS的问题, 那应该就是防火墙的问题, 下次去实验室再看看,
" />
<meta property="og:url" content="https://blog.jiyi27.com/posts/bugs/008-computer-lab-cannot-access-youtube/" />
<meta property="og:site_name" content="为霜的博客" />

  <meta property="og:image" content="https://blog.jiyi27.com/og-image.png">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">

  <meta property="article:section" content="bugs" />


  <meta property="article:published_time" content="2023-11-22 21:43:22 &#43;0000 UTC" />












</head>
<body>


<div class="container center">

  
  
  

  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://blog.jiyi27.com/posts/bugs/008-computer-lab-cannot-access-youtube/">排查实验室电脑无法访问一些网站</a>
  </h1>
  <div class="post-meta"><time class="post-date">2023-11-22</time><span class="post-reading-time">2 分钟阅读 (278 字数)</span></div>

  
    <span class="post-tags">
      
      #<a href="https://blog.jiyi27.com/tags/bugs/">bugs</a>&nbsp;
      
      #<a href="https://blog.jiyi27.com/tags/dns/">dns</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <p>首先可以联网, 谷歌和微软邮箱等其他的一些网站都可访问, 但是访问油管的时候总是会超时,</p>
<p>首先想到了是 DNS 服务器的问题, 尝试把电脑的 DNS server 改为 8.8.8.8, 可惜需要管理员权限, 失败</p>
<p>后来无聊想着看看解析出来 youtube.com 的实际ip是什么, 使用 nklookup 查了一下, (大概这样, 没在实验室)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>❯ nslookup youtube.com
</span></span><span style="display:flex;"><span>Server:		192.168.2.1
</span></span><span style="display:flex;"><span>Address:	192.168.100.1#53
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Non-authoritative answer:
</span></span><span style="display:flex;"><span>Name:	youtube.com
</span></span><span style="display:flex;"><span>Address: 142.251.40.206
</span></span></code></pre></div><p>于是访问 <code>142.251.40.206</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>❯ wget -O- 142.251.40.206
</span></span><span style="display:flex;"><span>--2023-11-22 22:23:53--  http://142.251.40.206/
</span></span><span style="display:flex;"><span>Connecting to 142.251.40.206:80... connected.
</span></span><span style="display:flex;"><span>HTTP request sent, awaiting response... <span style="color:#ae81ff">301</span> Moved Permanently
</span></span><span style="display:flex;"><span>Location: http://www.google.com/ <span style="color:#f92672">[</span>following<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>--2023-11-22 22:23:53--  http://www.google.com/
</span></span><span style="display:flex;"><span>Resolving www.google.com <span style="color:#f92672">(</span>www.google.com<span style="color:#f92672">)</span>... 142.250.80.36
</span></span></code></pre></div><p>可以看到被重定向到了谷歌页面, 当时在实验室也是这种情况, 查了一下, 这确实是正确的地址, 只是<a href="https://stackoverflow.com/questions/5142030/why-does-the-resolved-ip-of-youtube-com-direct-to-google-com">谷歌给重定向</a>了, 所以不是DNS的问题, 那应该就是防火墙的问题, 下次去实验室再看看,</p>
<p>另外上面 nskookup 返回的是 <a href="https://davidzhu.xyz/post/networking/006-commands-in-network/">Non-authoritative answer</a>, 意思是 ip 地址不是由该域名的 NS 服务器返回的, 而是从 DNS cache获取的, 所以 Non-authoritative answer 并不是代表不安全或者不可靠, 但可能不是最新的, 比如你的域名刚更新了 NS server, 加了层 Cloudflare 的 https 加密代理, 即 <code>your_domain-&gt;proxy-ip-&gt;your_ip</code>, 而学校的 DNS cache 里缓存的却是你之前的 ip, 即 <code>your_domain -&gt; your_ip</code>, 那代理就不会生效,</p>
<hr>
<p>去实验室查了一下我域名的NS, 竟然 time-out:</p>
<pre tabindex="0"><code>c: \Users\student&gt;nslookup shaowenzhu.top
Server: Unknown
Address:192.168.102.1

DNS request timed out.
timeout was 2 seconds.
...
</code></pre><p>查了一下, 看到了一个与我<a href="https://superuser.com/questions/1303128/why-does-nslookup-return-dns-request-timed-out">相似的问题</a>:</p>
<p><em>DNS request timed out</em> means NSLookup submitted the query to the DNS server, but did not get a response.</p>
<p>It&rsquo;s possible the DNS server you queried was having a problem and couldn&rsquo;t reply. Network errors could be to blame as well.</p>
<p>However, given that you did this from a &ldquo;public computer,&rdquo; the most likely explanation is that <strong>your DNS lookup was blocked by the network&rsquo;s firewall</strong>. It&rsquo;s common for network administrators to require that DNS lookups originating from nodes on the internal network be done using approved DNS servers. These can either be DNS servers under the administrator&rsquo;s control, or specific public DNS servers selected by the admin.</p>
<p>突然想到 DNS 缓存在 Chrome 上也有备份, 于是去查了一下是不是可以修改 DNS server 在 Chrome 上, (在电脑上没有管理员权限),</p>
<p>真的有, 具体参考(privacy-security -&gt; Advanced -&gt; Use Secure DNS): <a href="https://www.minitool.com/news/how-to-change-dns-server-in-google-chrome.html">How to Change DNS Server in Google Chrome on Computer and Mobile? - MiniTool</a></p>
<p>然后可以在Chrome上通过域名访问我的网站了, 终于不用输入 IP 了每次, nnd</p>

      </div></div>

  
    
<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h">查看其他文章</span>
    <hr />
  </div>
  <div class="pagination__buttons">
    
      <a href="https://blog.jiyi27.com/posts/python/basics/004-yield-generator/" class="button inline prev">
        Yeild &amp; Generator Python
      </a>
    
    
      ::
    
    
      <a href="https://blog.jiyi27.com/posts/http/009-url-encoding/" class="button inline next">
        URL Encoding (Percent Encoding)
      </a>
    
  </div>
</div>


  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/jiyi27/jiyi27.github.io" target="_blank">Theme</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
