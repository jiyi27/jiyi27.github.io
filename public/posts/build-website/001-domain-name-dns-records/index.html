<!DOCTYPE html>
<html lang="en">
<head>
  
    
    <title>DNS 基础概念 :: 为霜的博客</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="1. DNS Hierarchy DNS服务器怎么会知道每个域名的IP地址呢？答案是分级查询, 仔细看下面DNS解析过程，每个域名的尾部都多了一个点.
多出的那个.是Root Level Domain, 比如www.example.com真正的名字是www.example.com.root然后上图就简写为www.example.com. 因为根域名.root对于所有域名都是一样的，所以平时是省略的。
域名的层级结构: hostname.SLD.TLD.root, hostname 也叫 subdomain.
2. HOSTNAME vs SLD HOSTNAME 和二级域名(SLD)是不一样的, 二级域名是指example.com里面的example, 而HOSTNAME是指www.example.com里面的www.
HOSTNAME 的作用是为了区分同一个域名下的不同服务, 比如www.example.com和blog.example.com是同一个域名下的不同服务, 现在都是采用微服务分布式架构, 即每个服务通常不在一个主机, 这样用户访问www.example.com和blog.example.com时就会访问到不同的服务器, 从而提供不同的服务. 如下图可以看出一个 HOSTNAME 可以对应一个 IP:
3. DNS Records 3.1. A Record 常见的 DNS Records 有 A, CNAME, TXT, 其中 A 记录是最常见的, 用于将域名指向一个 ipv4 IP地址, CNAME 记录用于将域名指向另一个域名.
当你想给域名添加一个 ip 地址时, 只能添加 A 记录. 添加 A 记录时需要指定 HOSTNAME 和 IP, 其中 HOSTNAME 可以填@或者www或blog等, @代表空即不填,
" />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://blog.jiyi27.com/posts/build-website/001-domain-name-dns-records/" />





  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/categories.min.3202f75cbb294747099af3850a68a09ee94b3ce505fc39e134692d90ff0a9b2a.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/code.min.dd73d157e77e82a3dc1cb06ba424cf6cc6811af0bb604ad6c68e70faf2439c8a.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/fonts.min.4881f0c525f3ce2a1864fb6e96676396cebe1e6fcef1933e8e1dde7041004fb5.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/main.min.3fb8954e26342ad3afabb4525959bfec6f9fc0d6929f0dda738ddeee30211690.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/menu.min.8cee75f73b9f9b1e40bd0dd53e6e770156b08bbfe1c579cd256c3f6cd3b6d32b.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/post.min.014a50745fbdd41d5f420a3e288730d5af4b7d90344dc6211d0e50c368b5b303.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/prism.min.b958d3d7c6c67361b945f9062d07d403422604b3d2cd33f93b88d41ed0ba634d.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/term.min.94de320c1b850e126e6d2c88a7c90acf58bb1313f0ea14a14cda2a42f2a88db2.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">


<link rel="stylesheet" href="https://blog.jiyi27.com/terminal.css">




<link rel="shortcut icon" href="https://blog.jiyi27.com/favicon.png">
<link rel="apple-touch-icon" href="https://blog.jiyi27.com/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="DNS 基础概念">
<meta property="og:description" content="1. DNS Hierarchy DNS服务器怎么会知道每个域名的IP地址呢？答案是分级查询, 仔细看下面DNS解析过程，每个域名的尾部都多了一个点.
多出的那个.是Root Level Domain, 比如www.example.com真正的名字是www.example.com.root然后上图就简写为www.example.com. 因为根域名.root对于所有域名都是一样的，所以平时是省略的。
域名的层级结构: hostname.SLD.TLD.root, hostname 也叫 subdomain.
2. HOSTNAME vs SLD HOSTNAME 和二级域名(SLD)是不一样的, 二级域名是指example.com里面的example, 而HOSTNAME是指www.example.com里面的www.
HOSTNAME 的作用是为了区分同一个域名下的不同服务, 比如www.example.com和blog.example.com是同一个域名下的不同服务, 现在都是采用微服务分布式架构, 即每个服务通常不在一个主机, 这样用户访问www.example.com和blog.example.com时就会访问到不同的服务器, 从而提供不同的服务. 如下图可以看出一个 HOSTNAME 可以对应一个 IP:
3. DNS Records 3.1. A Record 常见的 DNS Records 有 A, CNAME, TXT, 其中 A 记录是最常见的, 用于将域名指向一个 ipv4 IP地址, CNAME 记录用于将域名指向另一个域名.
当你想给域名添加一个 ip 地址时, 只能添加 A 记录. 添加 A 记录时需要指定 HOSTNAME 和 IP, 其中 HOSTNAME 可以填@或者www或blog等, @代表空即不填,
" />
<meta property="og:url" content="https://blog.jiyi27.com/posts/build-website/001-domain-name-dns-records/" />
<meta property="og:site_name" content="为霜的博客" />

  <meta property="og:image" content="https://blog.jiyi27.com/og-image.png">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">

  <meta property="article:section" content="建站" />


  <meta property="article:published_time" content="2024-04-07 00:15:30 &#43;0000 UTC" />












</head>
<body>


<div class="container center">

  
  
  

  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://blog.jiyi27.com/posts/build-website/001-domain-name-dns-records/">DNS 基础概念</a>
  </h1>
  <div class="post-meta"><time class="post-date">2024-04-07</time><span class="post-reading-time">2 分钟阅读 (394 字数)</span></div>

  
    <span class="post-tags">
      
      #<a href="https://blog.jiyi27.com/tags/%E5%BB%BA%E7%AB%99/">建站</a>&nbsp;
      
      #<a href="https://blog.jiyi27.com/tags/dns/">dns</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <h2 id="1-dns-hierarchy">1. DNS Hierarchy<a href="#1-dns-hierarchy" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>DNS服务器怎么会知道每个域名的IP地址呢？答案是分级查询, 仔细看下面DNS解析过程，每个域名的尾部都多了一个点<code>.</code></p>
<p><img src="https://pub-2a6758f3b2d64ef5bb71ba1601101d35.r2.dev/blogs/2025/01/060ac4f1fb8e9b0fa6d0d81eea60e23c.png" alt=""></p>
<p>多出的那个<code>.</code>是Root Level Domain, 比如<code>www.example.com</code>真正的名字是<code>www.example.com.root</code>然后上图就简写为<code>www.example.com.</code> 因为根域名<code>.root</code>对于所有域名都是一样的，所以平时是省略的。</p>
<blockquote>
<p>域名的层级结构: <code>hostname.SLD.TLD.root</code>, <strong>hostname 也叫 subdomain</strong>.</p>
</blockquote>
<h2 id="2-hostname-vs-sld">2. HOSTNAME vs SLD<a href="#2-hostname-vs-sld" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>HOSTNAME 和二级域名(SLD)是不一样的, 二级域名是指<code>example.com</code>里面的<code>example</code>, 而HOSTNAME是指<code>www.example.com</code>里面的<code>www</code>.</p>
<p>HOSTNAME 的作用是为了区分同一个域名下的不同服务, 比如<code>www.example.com</code>和<code>blog.example.com</code>是同一个域名下的不同服务, 现在都是采用微服务分布式架构, 即每个服务通常不在一个主机, 这样用户访问<code>www.example.com</code>和<code>blog.example.com</code>时就会访问到不同的服务器, 从而提供不同的服务. 如下图可以看出一个 HOSTNAME 可以对应一个 IP:</p>
<p><img src="https://pub-2a6758f3b2d64ef5bb71ba1601101d35.r2.dev/001-domain-name-dns-records%2F01.jpg" alt=""></p>
<h2 id="3-dns-records">3. DNS Records<a href="#3-dns-records" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<h3 id="31-a-record">3.1. A Record<a href="#31-a-record" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>常见的 DNS Records 有 <code>A</code>, <code>CNAME</code>, <code>TXT</code>, 其中 <code>A</code> 记录是最常见的, 用于将域名指向一个 ipv4 IP地址, <code>CNAME</code> 记录用于将域名指向另一个域名.</p>
<p>当你想给域名添加一个 ip 地址时, 只能添加 <code>A</code> 记录. 添加 A 记录时需要指定 HOSTNAME 和 IP, 其中 <code>HOSTNAME</code> 可以填<code>@</code>或者<code>www</code>或<code>blog</code>等, <code>@</code>代表空即不填,</p>
<p>一般域名自带默认的 DNS Records, 所以买了域名之后做的第一件事就应该删除这些默认记录, 不然等你又添加了一个A记录, 这时候你的域名就会被解析到多个IP(默认的和你刚添加的), 那浏览器访问你域名的时候, 选择哪个呢? 我查了一下论坛, 有人说是choose randomly, 所以如果你不删除域名所有的默认DNS Records, 那浏览器访问你域名的时候就有可能选择“错误”的ip,</p>
<blockquote>
<p>Yes you can. It is called round-robin DNS, and <strong>the browser just chooses one of them randomly</strong>. It is a well used method of getting cheap load balancing, but if one host goes down, users will still try to access it. <a href="https://serverfault.com/q/528742/761923">https://serverfault.com/q/528742/761923</a></p>
</blockquote>
<h3 id="32-cname-record">3.2. CNAME Record<a href="#32-cname-record" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>Use a CNAME record instead of an A record when one domain or subdomain is just another name for a different domain. <strong>All CNAME records must point to a domain, never to an IP address</strong>.</p>
<p>假设你有个主网站 example.com，它有一个A记录指向IP地址 123.45.67.89。若你还想通过 <a href="https://www.example.com">www.example.com</a> 访问这个网站，有两个办法,</p>
<ul>
<li>
<p>再创建一个A记录 host name 写为 www 指向 123.45.67.89, (注意对于 example.com 的A记录 host name 是空).</p>
</li>
<li>
<p>创建一个 CNAME 记录, Host Name 写为 www, 指向 example.com</p>
</li>
</ul>
<p>第二种办法的工作原理：</p>
<ul>
<li>example.com A记录 -&gt; 123.45.67.89</li>
<li><a href="https://www.example.com">www.example.com</a> CNAME记录 -&gt; example.com</li>
</ul>
<p>当用户尝试访问 <a href="https://www.example.com">www.example.com</a> 时，DNS解析流程如下：</p>
<ul>
<li>DNS查找 <a href="https://www.example.com">www.example.com</a> 的记录。</li>
<li>找到CNAME记录，了解到 <a href="https://www.example.com">www.example.com</a> 是 example.com 的别名。</li>
<li>接着，DNS会解析 example.com 的A记录，获取其IP地址 123.45.67.89。</li>
<li>用户的请求最终被定向到IP地址 123.45.67.89，也就是 example.com 所在的服务器。</li>
</ul>
<p>添加 CNAME 有什么优点呢? 比如你的服务器IP地址发生变化, 此时只需要更新 example.com 的A记录就行了, 如果全都使用A记录，你需要手动更新 example.com 和 <a href="https://www.example.com">www.example.com</a> 的 A 记录,</p>
<blockquote>
<p>Github Pages 的 custom domain 就可以使用 CNAME 记录, 即只需简单给你的域名添加一个 CNAME 记录, 指向 <code>username.github.io</code> 即可, <strong>不用修改任何 NS 服务器</strong>. 注意添加 CNAME 记录时, 我的 HOSTNAME 填的是 <code>blog</code>, 即 <code>blog.example.com</code> 指向 <code>username.github.io</code>, 你也可以把 HOSTNAME 设置为空, 若为空则代表你的主域名 <code>example.com</code> 指向 <code>username.github.io</code>, 根据个人喜好来设置.</p>
</blockquote>
<p><img src="https://pub-2a6758f3b2d64ef5bb71ba1601101d35.r2.dev/blogs/2024/04/f356b3dd152035f92b0ae20335413ab0.jpg" alt=""></p>
<h3 id="33-ttl-field">3.3. TTL Field<a href="#33-ttl-field" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>另外 DNS Records 有一个字段叫 TTL, 这里介绍一下: Time to Live (TTL) is a field on DNS records that controls how long each record is valid and — as a result — how long it takes for record updates to reach your end users. Longer TTLs speed up DNS lookups by increasing the chance of cached results, but a longer TTL also means that updates to your records take longer to go into effect.</p>
<h2 id="4-总结">4. 总结<a href="#4-总结" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>买过来域名, 根据不同情况可能做的修改如下:</p>
<ul>
<li>无托管域名, 则直接去你的域名注册商那里添加 DNS Records, 一般是添加 A 记录, 指向你的服务器 IP 地址 即可.</li>
<li>若要将域名托管到其他地方 (如 Cloudflare), 则只需要修改域名的 Nameserver 为 Cloudflare 指定的的 Nameserver 即可. 之后在 Cloudflare 上即添加管理不同类似的 DNS Records.</li>
</ul>
<p>References:</p>
<ul>
<li><a href="https://developers.cloudflare.com/dns/manage-dns-records/reference/ttl/">Time to Live (TTL) · Cloudflare DNS docs</a></li>
<li><a href="https://www.cloudflare.com/zh-cn/learning/dns/dns-records/dns-cname-record/">什么是 DNS CNAME 记录？ | Cloudflare</a></li>
<li><a href="https://www.educative.io/answers/what-is-dns-hierarchy">What is DNS Hierarchy?</a></li>
</ul>

      </div></div>

  
    
<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h">查看其他文章</span>
    <hr />
  </div>
  <div class="pagination__buttons">
    
      <a href="https://blog.jiyi27.com/posts/bugs/010-post-large-file/" class="button inline prev">
        An Analysis of high CPU and RAM usage caused by Go Program
      </a>
    
    
      ::
    
    
      <a href="https://blog.jiyi27.com/posts/build-website/011-cf-r2/" class="button inline next">
        Cloudflare R2 配合 PicGo 博客图床
      </a>
    
  </div>
</div>


  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/jiyi27/jiyi27.github.io" target="_blank">Theme</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
