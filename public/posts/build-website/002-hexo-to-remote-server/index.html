<!DOCTYPE html>
<html lang="en">
<head>
  
    
    <title>部署博客到服务器 Nginx :: 为霜的博客</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="1. 安装Nginx和git (服务器端) 1.1. Installing the Nginx Web Server sudo yum install nginx sudo systemctl enable nginx sudo systemctl start nginx 1.2. Adjusting Firewall Rules Run the following command to permanently enable HTTP connections on port 80:
sudo firewall-cmd --permanent --add-service=http To verify that the http firewall service was added correctly, you can run:
sudo firewall-cmd --permanent --list-all You’ll see output like this:
public target: default icmp-block-inversion: no interfaces: sources: services: cockpit dhcpv6-client http ssh ports: protocols: masquerade: no forward-ports: source-ports: icmp-blocks: rich rules: To apply the changes, you’ll need to reload the firewall service:
" />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://blog.jiyi27.com/posts/build-website/002-hexo-to-remote-server/" />





  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/categories.min.3202f75cbb294747099af3850a68a09ee94b3ce505fc39e134692d90ff0a9b2a.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/code.min.dd73d157e77e82a3dc1cb06ba424cf6cc6811af0bb604ad6c68e70faf2439c8a.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/fonts.min.4881f0c525f3ce2a1864fb6e96676396cebe1e6fcef1933e8e1dde7041004fb5.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/main.min.3fb8954e26342ad3afabb4525959bfec6f9fc0d6929f0dda738ddeee30211690.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/menu.min.8cee75f73b9f9b1e40bd0dd53e6e770156b08bbfe1c579cd256c3f6cd3b6d32b.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/post.min.014a50745fbdd41d5f420a3e288730d5af4b7d90344dc6211d0e50c368b5b303.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/prism.min.b958d3d7c6c67361b945f9062d07d403422604b3d2cd33f93b88d41ed0ba634d.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/term.min.94de320c1b850e126e6d2c88a7c90acf58bb1313f0ea14a14cda2a42f2a88db2.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">


<link rel="stylesheet" href="https://blog.jiyi27.com/terminal.css">




<link rel="shortcut icon" href="https://blog.jiyi27.com/favicon.png">
<link rel="apple-touch-icon" href="https://blog.jiyi27.com/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="部署博客到服务器 Nginx">
<meta property="og:description" content="1. 安装Nginx和git (服务器端) 1.1. Installing the Nginx Web Server sudo yum install nginx sudo systemctl enable nginx sudo systemctl start nginx 1.2. Adjusting Firewall Rules Run the following command to permanently enable HTTP connections on port 80:
sudo firewall-cmd --permanent --add-service=http To verify that the http firewall service was added correctly, you can run:
sudo firewall-cmd --permanent --list-all You’ll see output like this:
public target: default icmp-block-inversion: no interfaces: sources: services: cockpit dhcpv6-client http ssh ports: protocols: masquerade: no forward-ports: source-ports: icmp-blocks: rich rules: To apply the changes, you’ll need to reload the firewall service:
" />
<meta property="og:url" content="https://blog.jiyi27.com/posts/build-website/002-hexo-to-remote-server/" />
<meta property="og:site_name" content="为霜的博客" />

  <meta property="og:image" content="https://blog.jiyi27.com/og-image.png">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">

  <meta property="article:section" content="建站" />


  <meta property="article:published_time" content="2023-04-23 19:54:52 &#43;0000 UTC" />












</head>
<body>


<div class="container center">

  
  
  

  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://blog.jiyi27.com/posts/build-website/002-hexo-to-remote-server/">部署博客到服务器 Nginx</a>
  </h1>
  <div class="post-meta"><time class="post-date">2023-04-23</time><span class="post-reading-time">3 分钟阅读 (537 字数)</span></div>

  
    <span class="post-tags">
      
      #<a href="https://blog.jiyi27.com/tags/%E5%BB%BA%E7%AB%99/">建站</a>&nbsp;
      
      #<a href="https://blog.jiyi27.com/tags/nginx/">nginx</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <h2 id="1-安装nginx和git-服务器端">1. 安装Nginx和git (服务器端)<a href="#1-安装nginx和git-服务器端" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<h3 id="11-installing-the-nginx-web-server">1.1. Installing the Nginx Web Server<a href="#11-installing-the-nginx-web-server" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>sudo yum install nginx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo systemctl enable nginx
</span></span><span style="display:flex;"><span>sudo systemctl start nginx
</span></span></code></pre></div><h3 id="12-adjusting-firewall-rules">1.2. Adjusting Firewall Rules<a href="#12-adjusting-firewall-rules" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>Run the following command to permanently enable HTTP connections on port 80:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo firewall-cmd --permanent --add-service<span style="color:#f92672">=</span>http
</span></span></code></pre></div><p>To verify that the http firewall service was added correctly, you can run:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo firewall-cmd --permanent --list-all
</span></span></code></pre></div><p>You’ll see output like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>public
</span></span><span style="display:flex;"><span>  target: default
</span></span><span style="display:flex;"><span>  icmp-block-inversion: no
</span></span><span style="display:flex;"><span>  interfaces: 
</span></span><span style="display:flex;"><span>  sources: 
</span></span><span style="display:flex;"><span>  services: cockpit dhcpv6-client http ssh
</span></span><span style="display:flex;"><span>  ports: 
</span></span><span style="display:flex;"><span>  protocols: 
</span></span><span style="display:flex;"><span>  masquerade: no
</span></span><span style="display:flex;"><span>  forward-ports: 
</span></span><span style="display:flex;"><span>  source-ports: 
</span></span><span style="display:flex;"><span>  icmp-blocks: 
</span></span><span style="display:flex;"><span>  rich rules: 
</span></span></code></pre></div><p>To apply the changes, you’ll need to reload the firewall service:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>sudo firewall-cmd --reload
</span></span></code></pre></div><h2 id="2-创建新的用户-git-服务端">2. 创建新的用户 <code>git</code> (服务端)<a href="#2-创建新的用户-git-服务端" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>useradd git
</span></span><span style="display:flex;"><span>passwd git
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 给git用户配置sudo权限</span>
</span></span><span style="display:flex;"><span>chmod <span style="color:#ae81ff">740</span> /etc/sudoers
</span></span><span style="display:flex;"><span>vim /etc/sudoers
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 找到root ALL=(ALL) ALL，在它下方加入一行</span>
</span></span><span style="display:flex;"><span>git ALL<span style="color:#f92672">=(</span>ALL<span style="color:#f92672">)</span> ALL
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>chmod <span style="color:#ae81ff">400</span> /etc/sudoers
</span></span></code></pre></div><h3 id="21-添加公钥认证">2.1. 添加公钥认证<a href="#21-添加公钥认证" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<pre tabindex="0"><code>su git
cd

mkdir -p ~/.ssh
touch ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys
chmod 700 ~/.ssh

#把本地电脑ssh的公钥加进去  ~/.ssh/id_rsa.pub 
vim ~/.ssh/authorized_keys    
</code></pre><h3 id="22-git-hooks-自动部署">2.2. git-hooks 自动部署<a href="#22-git-hooks-自动部署" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>注意, 现在服务器有两个用户<code>git</code>和<code>root</code>, 然后他们只有自己的home目录是独立的, 而根目录下的比如<code>/etc/</code>, <code>/usr</code>这都是他们两个用户共享的, 看下面的输出你就知道什么意思了,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>ls -a /home/git/
</span></span><span style="display:flex;"><span>.  ..  .bash_logout  .bash_profile  .bashrc  .ssh  .viminfo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 因为我们是在用户git下访问的, 所以得用sudo才能访问root用户的文件</span>
</span></span><span style="display:flex;"><span>sudo ls -a /root/
</span></span><span style="display:flex;"><span>.   .bash_logout   .bashrc  .cshrc  .ssh     .viminfo
</span></span><span style="display:flex;"><span>..  .bash_profile  .cache   .pki    .tcshrc
</span></span></code></pre></div><p>好了不解释了, 开始设置git-hook以及服务器文件相关配置:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span><span style="color:#75715e"># 新建目录，这是git仓库的位置</span>
</span></span><span style="display:flex;"><span>sudo mkdir -p /var/repo
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 这里是我们网站网页的位置 </span>
</span></span><span style="display:flex;"><span>sudo mkdir -p /var/www/hexo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 创建个bare repository </span>
</span></span><span style="display:flex;"><span>cd /var/repo  
</span></span><span style="display:flex;"><span>sudo git init --bare blog.git
</span></span><span style="display:flex;"><span>sudo vim /var/repo/blog.git/hooks/post-update
</span></span></code></pre></div><p><code>post-update</code>的内容如下:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>git --work-tree<span style="color:#f92672">=</span>/var/www/hexo --git-dir<span style="color:#f92672">=</span>/var/repo/blog.git checkout -f
</span></span></code></pre></div><p>给<code>post-update</code>授权:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>cd /var/repo/blog.git/hooks/
</span></span><span style="display:flex;"><span>sudo chown -R git:git /var/repo/
</span></span><span style="display:flex;"><span>sudo chown -R git:git /var/www/hexo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 赋予其可执行权限</span>
</span></span><span style="display:flex;"><span>sudo chmod +x post-update
</span></span></code></pre></div><h2 id="3-配置nginx">3. 配置Nginx<a href="#3-配置nginx" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>cd /etc/nginx/conf.d/
</span></span><span style="display:flex;"><span>sudo vim blog.conf
</span></span></code></pre></div><p><code>blog.conf</code>的内容如下(注意因为我为域名添加个A记录然后<code>www</code>作为HOSTNAME, 如果你的域名只有一个A记录然后HOSTNAME还是空, 那你就填二级域名就好了<code>davidzhu.xyz</code>这样, 不懂的话请看我的<a href="https://www.davidzhu.xyz/2023/04/23/Build-Website/Domain-Name-DNS-Records/">域名分级和DNS记录之何为www</a>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>server <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    listen    <span style="color:#ae81ff">80</span> default_server;
</span></span><span style="display:flex;"><span>    listen    <span style="color:#f92672">[</span>::<span style="color:#f92672">]</span> default_server;
</span></span><span style="display:flex;"><span>    server_name    www.davidzhu.xyz;
</span></span><span style="display:flex;"><span>    root    /var/www/hexo;
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>nginx -t
</span></span><span style="display:flex;"><span>nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
</span></span><span style="display:flex;"><span>nginx: configuration file /etc/nginx/nginx.conf test is successful
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>nginx -s reload
</span></span></code></pre></div><h2 id="4-在本地安装hexo">4. 在本地安装Hexo<a href="#4-在本地安装hexo" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>Installing Hexo is quite easy and only requires the following beforehand:</p>
<ul>
<li>Node.js (Should be at least Node.js 10.13, recommends 12.0 or higher)</li>
<li>Git</li>
<li><code>node -v</code>查看是否安装了node</li>
</ul>
<h3 id="41-install-nodejs">4.1 Install Node.js<a href="#41-install-nodejs" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<h4 id="411-install-nvm">4.1.1. Install nvm<a href="#411-install-nvm" class="hanchor" ariaLabel="Anchor">#</a> </h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>source ~/.bashrc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>source ~/.zshrc
</span></span></code></pre></div><p><code>bash</code> is an sh-compatible command language interpreter that executes commands read from the standard input or from a file.</p>
<p>We strongly recommend using a Node version manager like nvm to install <code>Node.js</code> and <code>npm</code>. We do not recommend using a Node installer, since the Node installation process installs npm in a directory with local permissions and can cause permissions errors when you run npm packages globally.</p>
<h4 id="412-install-node">4.1.2. Install node<a href="#412-install-node" class="hanchor" ariaLabel="Anchor">#</a> </h4>
<pre tabindex="0"><code>nvm install node # &#34;node&#34; is an alias for the latest version

# uninstall, 19.8.1是node的版本
nvm uninstall 19.8.1

# 尽量使用16.0.0版本的, 不然会出现问题: node: /lib64/libm.so.6: version `GLIBC_2.27&#39; not found (required by node)
nvm install 16.0.0
</code></pre><ul>
<li><a href="https://github.com/nvm-sh/nvm">install nvm</a></li>
<li><a href="https://docs.npmjs.com/downloading-and-installing-node-js-and-npm">Downloading and installing Node.js and npm</a></li>
</ul>
<h3 id="42-安装hexo">4.2. 安装Hexo<a href="#42-安装hexo" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>安装hexo以及相关插件,</p>
<pre tabindex="0"><code>sudo npm install hexo-cli hexo-server hexo-deployer-git -g
</code></pre><h2 id="5-在本地配置hexo">5. 在本地配置hexo<a href="#5-在本地配置hexo" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<h3 id="51-初始化hexo">5.1. 初始化hexo<a href="#51-初始化hexo" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>hexo init ~/blog
</span></span></code></pre></div><h3 id="52-配置hexo">5.2. 配置hexo<a href="#52-配置hexo" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<h4 id="521-设置主题和deploy">5.2.1 设置主题和deploy<a href="#521-设置主题和deploy" class="hanchor" ariaLabel="Anchor">#</a> </h4>
<pre tabindex="0"><code>cd ~/blog

git clone https://github.com/next-theme/hexo-theme-next themes/next
</code></pre><p>编辑<code>_config.yml</code></p>
<pre tabindex="0"><code>vi _config.yml 
</code></pre><p>找到theme, 改为next, 顺便也改一下deploy设置, 找到对应内容改为如下:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span><span style="color:#75715e"># Extensions</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## Plugins: https://hexo.io/plugins/</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## Themes: https://hexo.io/themes/</span>
</span></span><span style="display:flex;"><span>theme: next
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Deployment</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## Docs: https://hexo.io/docs/one-command-deployment</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 必须填ip地址</span>
</span></span><span style="display:flex;"><span>deploy:
</span></span><span style="display:flex;"><span>  type: git
</span></span><span style="display:flex;"><span>  repo: root@144.202.12.32:/var/repo/blog.git
</span></span><span style="display:flex;"><span>  branch: master
</span></span></code></pre></div><p>在deploy之前需要在服务器的root用户加上本地电脑的公钥(<code>~/.ssh/id_rsa.pub</code>), 否则你没权限提交git, 和github同理, 我猜的,</p>
<pre tabindex="0"><code>vi /root/.ssh/authorized_keys
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span><span style="color:#75715e"># 清除缓存</span>
</span></span><span style="display:flex;"><span>hexo clean
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 生成静态页面</span>
</span></span><span style="display:flex;"><span>hexo generate
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 注意要使用这个命令 否则使用hexo deploy的时候会出现找不到git报错</span>
</span></span><span style="display:flex;"><span>npm install hexo-deployer-git --save
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 将本地静态页面目录部署到云服务器</span>
</span></span><span style="display:flex;"><span>hexo deploy
</span></span></code></pre></div><h2 id="6-修改git用户默认shell环境">6. 修改git用户默认shell环境<a href="#6-修改git用户默认shell环境" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-zsh" data-lang="zsh"><span style="display:flex;"><span>vim /etc/passwd
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 修改最后一行</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 将/bin/bash修改为/usr/bin/git-shell</span>
</span></span></code></pre></div><h2 id="7-bug总结">7. bug总结<a href="#7-bug总结" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>首先, <code>/Users/shaowen/blog/_config.yml</code>里的内容, delopy那部分, 不可以填错, master分支是master, 不是main, 也可以是main但是现在没空研究具体怎么操作,</p>
<p>其次浏览器出错说403 forbidden, 这种情况就去看看网页目录下有没有文件, 即我们在本地电脑的部署的hexo可能并没有成功的部署到服务器, 因为权限问题或者服务器的那个hooks脚本没有执行权限导致无法自动更新,</p>
<p>你可以把hooks也就是<code>/var/repo/blog.git/hooks/post-update</code>里命令的复制出来在服务器执行一下,看看会不会有效果,</p>
<ul>
<li><a href="https://blog.kisnows.com/2016/03/10/Hexo">https://blog.kisnows.com/2016/03/10/Hexo</a>部署到VPS并启用HTTPS/</li>
</ul>

      </div></div>

  
    
<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h">查看其他文章</span>
    <hr />
  </div>
  <div class="pagination__buttons">
    
      <a href="https://blog.jiyi27.com/posts/bugs/004-bug-ssh-connection-refused/" class="button inline prev">
        SSH连接远程主机出现的Connection Refused问题
      </a>
    
    
      ::
    
    
      <a href="https://blog.jiyi27.com/posts/git/002-git-branch/" class="button inline next">
        git branch git stash git add (stage)
      </a>
    
  </div>
</div>


  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/jiyi27/jiyi27.github.io" target="_blank">Theme</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
