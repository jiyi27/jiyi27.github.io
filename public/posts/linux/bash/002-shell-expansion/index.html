<!DOCTYPE html>
<html lang="en">
<head>
  
    
    <title>Shell Expansion :: 为霜的博客</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="1. Shell expansion When the shell receives a command, either from the user typing at the keyboard, or from a shell script, it breaks it up into words. After this happens, the shell performs seven operations on the words, which can change how they are interpreted. There are seven operations are collectively known as &lsquo;shell expansion&rsquo;.
The seven operations that the shell performs are:
Brace Expansion - expanding values between braces, such as file{1..3} into file1 file2 file3 Tilde Expansion - expanding the ~ tilde symbol for the home directory into the path to the home directory, such as ~/effective-shell into /home/dwmkerr/effective-shell Parameter Expansion - expanding terms that start with a $ symbol into parameter values, such as $HOME into the value of the variable named HOME Command Substitution - evaluation of the contents of $(command) sequences, which are used to run commands and return the results to the shell command line Arithmetic Expansion - evaluation of the contents of $((expression)) sequences, which are used to perform basic mathematical operations Word Splitting - once all of the previous operations are run, the shell splits the command up into &lsquo;words&rsquo;, which are the units of text that you can run loops over Pathname Expansion - the shell expands wildcards and special characters in pathnames, such as *.txt into the set of files that are matched by the sequence Brace Expansion
" />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://blog.jiyi27.com/posts/linux/bash/002-shell-expansion/" />





  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/categories.min.3202f75cbb294747099af3850a68a09ee94b3ce505fc39e134692d90ff0a9b2a.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/code.min.dd73d157e77e82a3dc1cb06ba424cf6cc6811af0bb604ad6c68e70faf2439c8a.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/fonts.min.4881f0c525f3ce2a1864fb6e96676396cebe1e6fcef1933e8e1dde7041004fb5.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/main.min.3fb8954e26342ad3afabb4525959bfec6f9fc0d6929f0dda738ddeee30211690.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/menu.min.8cee75f73b9f9b1e40bd0dd53e6e770156b08bbfe1c579cd256c3f6cd3b6d32b.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/post.min.014a50745fbdd41d5f420a3e288730d5af4b7d90344dc6211d0e50c368b5b303.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/prism.min.b958d3d7c6c67361b945f9062d07d403422604b3d2cd33f93b88d41ed0ba634d.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/term.min.94de320c1b850e126e6d2c88a7c90acf58bb1313f0ea14a14cda2a42f2a88db2.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">


<link rel="stylesheet" href="https://blog.jiyi27.com/terminal.css">




<link rel="shortcut icon" href="https://blog.jiyi27.com/favicon.png">
<link rel="apple-touch-icon" href="https://blog.jiyi27.com/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Shell Expansion">
<meta property="og:description" content="1. Shell expansion When the shell receives a command, either from the user typing at the keyboard, or from a shell script, it breaks it up into words. After this happens, the shell performs seven operations on the words, which can change how they are interpreted. There are seven operations are collectively known as &lsquo;shell expansion&rsquo;.
The seven operations that the shell performs are:
Brace Expansion - expanding values between braces, such as file{1..3} into file1 file2 file3 Tilde Expansion - expanding the ~ tilde symbol for the home directory into the path to the home directory, such as ~/effective-shell into /home/dwmkerr/effective-shell Parameter Expansion - expanding terms that start with a $ symbol into parameter values, such as $HOME into the value of the variable named HOME Command Substitution - evaluation of the contents of $(command) sequences, which are used to run commands and return the results to the shell command line Arithmetic Expansion - evaluation of the contents of $((expression)) sequences, which are used to perform basic mathematical operations Word Splitting - once all of the previous operations are run, the shell splits the command up into &lsquo;words&rsquo;, which are the units of text that you can run loops over Pathname Expansion - the shell expands wildcards and special characters in pathnames, such as *.txt into the set of files that are matched by the sequence Brace Expansion
" />
<meta property="og:url" content="https://blog.jiyi27.com/posts/linux/bash/002-shell-expansion/" />
<meta property="og:site_name" content="为霜的博客" />

  <meta property="og:image" content="https://blog.jiyi27.com/og-image.png">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">

  <meta property="article:section" content="linux" />


  <meta property="article:published_time" content="2023-08-26 11:30:20 &#43;0000 UTC" />












</head>
<body>


<div class="container center">

  
  
  

  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://blog.jiyi27.com/posts/linux/bash/002-shell-expansion/">Shell Expansion</a>
  </h1>
  <div class="post-meta"><time class="post-date">2023-08-26</time><span class="post-reading-time">4 分钟阅读 (641 字数)</span></div>

  
    <span class="post-tags">
      
      #<a href="https://blog.jiyi27.com/tags/linux/">linux</a>&nbsp;
      
      #<a href="https://blog.jiyi27.com/tags/shell/">shell</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <h2 id="1-shell-expansion">1. Shell expansion<a href="#1-shell-expansion" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>When the shell receives a command, either from the user typing at the keyboard, or from a shell script, it breaks it up into words. After this happens, the shell performs seven operations on the words, which can change how they are interpreted. There are seven operations are collectively known as &lsquo;shell expansion&rsquo;.</p>
<p>The seven operations that the shell performs are:</p>
<ol>
<li>Brace Expansion - expanding values between braces, such as <code>file{1..3}</code> into <code>file1 file2 file3</code></li>
<li>Tilde Expansion - expanding the <code>~</code> tilde symbol for the home directory into the path to the home directory, such as <code>~/effective-shell</code> into <code>/home/dwmkerr/effective-shell</code></li>
<li>Parameter Expansion - expanding terms that start with a <code>$</code> symbol into parameter values, such as <code>$HOME</code> into the value of the variable named <code>HOME</code></li>
<li>Command Substitution - evaluation of the contents of <code>$(command)</code> sequences, which are used to run commands and return the results to the shell command line</li>
<li>Arithmetic Expansion - evaluation of the contents of <code>$((expression))</code> sequences, which are used to perform basic mathematical operations</li>
<li>Word Splitting - once all of the previous operations are run, the shell splits the command up into &lsquo;words&rsquo;, which are the units of text that you can run loops over</li>
<li>Pathname Expansion - the shell expands wildcards and special characters in pathnames, such as <code>*.txt</code> into the set of files that are matched by the sequence</li>
</ol>
<p><strong>Brace Expansion</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>mkdir /tmp/<span style="color:#f92672">{</span>one,two,three<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The line above is expanded to:</span>
</span></span><span style="display:flex;"><span>mdkir /tmp/one /tmp/two /tmp/three
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>touch file<span style="color:#f92672">{</span>1..5<span style="color:#f92672">}</span>.txt
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The line above is expanded to:</span>
</span></span><span style="display:flex;"><span>touch file1.txt file2.txt file3.txt file4.txt file5.txt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> x in <span style="color:#f92672">{</span>0..10..2<span style="color:#f92672">}</span>; <span style="color:#66d9ef">do</span> print $x; <span style="color:#66d9ef">done</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The line above is expanded to:</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> x in <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">8</span> 10; <span style="color:#66d9ef">do</span> print $x; <span style="color:#66d9ef">done</span>
</span></span></code></pre></div><p><strong>Parameter Expansion</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>fruit<span style="color:#f92672">=</span>apples
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;I like </span>$fruit<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The line above is expanded to:</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;I like apples&#34;</span>
</span></span></code></pre></div><p>When using parameter expansion it is generally preferable to surround the name of the parameter with braces - this allows you to tell the shell unambiguously what the name of the parameter is. For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;My backup folder is: </span><span style="color:#e6db74">${</span>HOME<span style="color:#e6db74">}</span><span style="color:#e6db74">backup&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The line above is expanded to:</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;My backup folder is: /home/dwmkerrbackup&#34;</span>
</span></span></code></pre></div><p>You should use<code>&quot;My backup folder is: ${HOME}backup&quot;</code>, not <code>&quot;I like $fruit&quot; </code>style.</p>
<p><strong>Tilde Expansion</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>cd ~/effective-shell
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The line above is expanded to:</span>
</span></span><span style="display:flex;"><span>cd $HOME/effective-shell
</span></span></code></pre></div><p>Note that if you want check what the command  exactly is after expansion, check it with <code>echo</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ ls
</span></span><span style="display:flex;"><span>one.txt
</span></span><span style="display:flex;"><span>two.txt
</span></span><span style="display:flex;"><span>three.dat
</span></span><span style="display:flex;"><span>$ echo rm *.txt
</span></span><span style="display:flex;"><span>rm one.txt two.txt
</span></span></code></pre></div><h2 id="2-wildcard-pattern">2. Wildcard pattern<a href="#2-wildcard-pattern" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<h3 id="21-wildcard-pattern-in-shell">2.1. Wildcard pattern in shell<a href="#21-wildcard-pattern-in-shell" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>A string is a <em><strong>wildcard pattern</strong></em> if it contains one of the characters <code>?</code>, <code>*</code>, or <code>[</code>,  Globbing is the operation that expands a wildcard pattern into the list of <strong>pathnames</strong> matching the pattern.  Matching is defined by:</p>
<ul>
<li>A <code>?</code> (not between brackets) matches any single character.</li>
<li>A <code>*</code> (not between brackets) matches any string, including the empty string.</li>
</ul>
<p>Don&rsquo;t forget  <code>*</code> may lose its special meaning in double qoutes, but it depends, at some conditions, it won&rsquo;t lost its special meaning for globing wich is filepath expansion. Learn more: <a href="https://davidzhu.xyz/post/linux/002-bash-basics/">Shell Script Basic Syntax - David&rsquo;s Blog</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># Expands to: tar xvf file1.tar file2.tar file42.tar ...</span>
</span></span><span style="display:flex;"><span>tar xvf *.tar
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Delete all files ends with .txt under current folder</span>
</span></span><span style="display:flex;"><span>rm *.txt
</span></span><span style="display:flex;"><span><span style="color:#75715e"># with double, it won&#39;t be expanded</span>
</span></span><span style="display:flex;"><span>$ rm <span style="color:#e6db74">&#34;*.txt&#34;</span>
</span></span><span style="display:flex;"><span>rm: *.txt: No such file or directory
</span></span><span style="display:flex;"><span><span style="color:#75715e"># search for a string in your current directory and all other subdirectories</span>
</span></span><span style="display:flex;"><span>$ grep -r ‘hello’ *  
</span></span><span style="display:flex;"><span>a.txt:hello world
</span></span><span style="display:flex;"><span>sub/c.txt:hello, this is...
</span></span><span style="display:flex;"><span>sub/b.txt:hello, this is...
</span></span><span style="display:flex;"><span><span style="color:#75715e"># check what the command is after expansion</span>
</span></span><span style="display:flex;"><span>$ echo grep -r ‘hello’ *
</span></span></code></pre></div><h3 id="22-metacharacter-in-regular-expressions">2.2. Metacharacter in regular expressions<a href="#22-metacharacter-in-regular-expressions" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>In regular expression the  <code>*</code>  is a metacharacter that represents zero or more occurrences of the preceding element.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ printf <span style="color:#e6db74">&#34;colour\ncolor\ncolouur\n&#34;</span> | egrep <span style="color:#e6db74">&#39;colou*r&#39;</span>                          
</span></span><span style="display:flex;"><span>colour
</span></span><span style="display:flex;"><span>color
</span></span><span style="display:flex;"><span>colouur
</span></span></code></pre></div><p>References:</p>
<ul>
<li>
<p><a href="https://man7.org/linux/man-pages/man7/glob.7.html">glob(7) - Linux manual page</a></p>
</li>
<li>
<p><a href="https://effective-shell.com/part-6-advanced-techniques/understanding-shell-expansion/">Understanding Shell Expansion | Effective Shell</a></p>
</li>
</ul>

      </div></div>

  
    
<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h">查看其他文章</span>
    <hr />
  </div>
  <div class="pagination__buttons">
    
      <a href="https://blog.jiyi27.com/posts/cs-basics/007-multithread-singlethread-server/" class="button inline prev">
        Is Multithreaded Server Better than a Single Thread Server?
      </a>
    
    
      ::
    
    
      <a href="https://blog.jiyi27.com/posts/golang/advance/002-concurrency-with-shared-variables/" class="button inline next">
        Concurrency with Shared Variables
      </a>
    
  </div>
</div>


  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/jiyi27/jiyi27.github.io" target="_blank">Theme</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
