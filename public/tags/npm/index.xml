<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Npm on 为霜的博客</title>
    <link>https://blog.jiyi27.com/tags/npm/</link>
    <description>Recent content in Npm on 为霜的博客</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Sun, 08 Dec 2024 15:20:22 +0000</lastBuildDate><atom:link href="https://blog.jiyi27.com/tags/npm/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>npm vs npx vs pnpm</title>
      <link>https://blog.jiyi27.com/posts/frontend/next-js/001-npm-npx-pnpm/</link>
      <pubDate>Sun, 08 Dec 2024 15:20:22 +0000</pubDate>
      
      <guid>https://blog.jiyi27.com/posts/frontend/next-js/001-npm-npx-pnpm/</guid>
      <description>&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ npx create-next-app@latest learn-by-example --use-pnpm
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;✔ Would you like to use TypeScript? … No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;✔ Would you like to use ESLint? … No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;✔ Would you like to use Tailwind CSS? … No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;✔ Would you like your code inside a &lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;src/&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt; directory? … No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;✔ Would you like to use App Router? &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;recommended&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; … No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;✔ Would you like to use Turbopack &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;next dev&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;? … No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;✔ Would you like to customize the import alias &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;@/*&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt; by default&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;? … No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm add date-fns lucide-react
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm dlx shadcn@latest init
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm dlx shadcn@latest add textarea
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;npm-vs-npx-vs-pnmp&#34;&gt;npm vs npx vs pnmp&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# download and install Node.js&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# https://nodejs.org/en/download/package-manager&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;brew install node@22
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;node -v &lt;span style=&#34;color:#75715e&#34;&gt;# should print `v22.12.0`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;npm -v &lt;span style=&#34;color:#75715e&#34;&gt;# should print `10.9.0`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# install pnpm&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# https://pnpm.io/installation&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl -fsSL https://get.pnpm.io/install.sh | sh -
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;npm&lt;/code&gt; comes with &lt;code&gt;Node.js&lt;/code&gt;, and &lt;code&gt;npx&lt;/code&gt; comes with &lt;code&gt;npm&lt;/code&gt;. &lt;strong&gt;In order to use &lt;code&gt;npm&lt;/code&gt; or &lt;code&gt;npx&lt;/code&gt;, you need install &lt;code&gt;node.js&lt;/code&gt;.&lt;/strong&gt;&lt;/p&gt;</description>
      <content>&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ npx create-next-app@latest learn-by-example --use-pnpm
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;✔ Would you like to use TypeScript? … No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;✔ Would you like to use ESLint? … No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;✔ Would you like to use Tailwind CSS? … No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;✔ Would you like your code inside a &lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;src/&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt; directory? … No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;✔ Would you like to use App Router? &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;recommended&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; … No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;✔ Would you like to use Turbopack &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;next dev&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;? … No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;✔ Would you like to customize the import alias &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;@/*&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt; by default&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;? … No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm add date-fns lucide-react
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm dlx shadcn@latest init
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm dlx shadcn@latest add textarea
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;npm-vs-npx-vs-pnmp&#34;&gt;npm vs npx vs pnmp&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# download and install Node.js&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# https://nodejs.org/en/download/package-manager&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;brew install node@22
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;node -v &lt;span style=&#34;color:#75715e&#34;&gt;# should print `v22.12.0`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;npm -v &lt;span style=&#34;color:#75715e&#34;&gt;# should print `10.9.0`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# install pnpm&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# https://pnpm.io/installation&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl -fsSL https://get.pnpm.io/install.sh | sh -
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;npm&lt;/code&gt; comes with &lt;code&gt;Node.js&lt;/code&gt;, and &lt;code&gt;npx&lt;/code&gt; comes with &lt;code&gt;npm&lt;/code&gt;. &lt;strong&gt;In order to use &lt;code&gt;npm&lt;/code&gt; or &lt;code&gt;npx&lt;/code&gt;, you need install &lt;code&gt;node.js&lt;/code&gt;.&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Node.js installation
└── includes npm (Node Package Manager)
└── includes npx (Node Package Execute)
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;npx create-react-app my-app
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;npm install some-package
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;NPM is a package manager for node.js, same as &lt;code&gt;pip&lt;/code&gt; for python, &lt;code&gt;pnmp&lt;/code&gt; is same as &lt;code&gt;npm&lt;/code&gt;, but more efficient&lt;/li&gt;
&lt;li&gt;npx 是 npm 的一个工具, 它允许我们直接运行 npm 包中的命令行工具, 而不需要全局安装这些工具&lt;/li&gt;
&lt;li&gt;&lt;code&gt;create-next-app@latest&lt;/code&gt;: 是 Next.js 官方提供的脚手架工具(scaffolding tool), create-next-app 是工具的名称, @latest 表示使用最新版本&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;举个例子来说明 npx 的作用:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 不使用 npx 的话,我们需要先全局安装&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;npm install -g create-next-app
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;create-next-app my-project
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 使用 npx,可以直接运行而不需要安装&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;npx create-next-app@latest my-project
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;pnpm&#34;&gt;pnpm&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;自己的项目添加依赖, 运行 &lt;code&gt;pnpm add xxx&lt;/code&gt;, 不要在项目外运行这个指令&lt;/li&gt;
&lt;li&gt;克隆的别人的项目, 进入项目后, 运行 &lt;code&gt;pnpm install&lt;/code&gt; 安装所有依赖&lt;/li&gt;
&lt;li&gt;查看 pnpm store 路径 &lt;code&gt;pnpm store path&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;清除 pnpm stpre 缓存 &lt;a href=&#34;https://pnpm.io/cli/store#prune&#34;&gt;&lt;code&gt;pnpm store prune&lt;/code&gt;&lt;/a&gt;: removes &lt;em&gt;unreferenced packages&lt;/em&gt; from the store. Unreferenced packages are packages that are not used by any projects on the system. Packages can become unreferenced after most installation operations, for instance when dependencies are made redundant.&lt;/li&gt;
&lt;li&gt;查看所在项目已安装的所有依赖 &lt;code&gt;pnpm list&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;pnpm add xxx&lt;/code&gt; 虽然该命令会把依赖安装到 pnpm store 中, 但你仍应该在项目里运行这个指令, 而不是随意一个地方,&lt;/p&gt;
&lt;p&gt;&lt;code&gt;pnpm add xxx&lt;/code&gt;  会在运行该指令的地方 添加三个文件 &lt;code&gt;package.json&lt;/code&gt;, &lt;code&gt;pnpm-lock.yaml&lt;/code&gt;, &lt;code&gt;node_modules&lt;/code&gt;, 其中 &lt;code&gt;node_modules&lt;/code&gt; 包含了通过符号链接指向 pnpm store 中实际依赖包的链接, pnpm 使用符号链接来节省磁盘空间&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;其它用法, 类似 npm:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 开发模式&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm run dev    &lt;span style=&#34;color:#75715e&#34;&gt;# 启动开发服务器，实时编译，方便开发&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 生产模式&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm run build  &lt;span style=&#34;color:#75715e&#34;&gt;# 构建优化后的生产环境代码&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm start      &lt;span style=&#34;color:#75715e&#34;&gt;# 启动生产环境服务器&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;pnpm run&lt;/code&gt; is a command, and &lt;code&gt;dev&lt;/code&gt;, &lt;code&gt;build&lt;/code&gt;, and &lt;code&gt;start&lt;/code&gt; are scripts/commands defined in your project&amp;rsquo;s &lt;code&gt;package.json&lt;/code&gt; file.&lt;/p&gt;
&lt;p&gt;Here&amp;rsquo;s how a typical package.json might look:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;your-project&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;scripts&amp;#34;&lt;/span&gt;: {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;dev&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;next dev&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;build&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;next build&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;start&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;next start&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can try add a custom scripts to package.json, like:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;scripts&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;:&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;//...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;custom&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;echo &amp;#39;my custom script&amp;#39;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Then run: &lt;code&gt;pnpm run custom&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;了解更多:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://pnpm.io/faq&#34;&gt;Why does my &lt;code&gt;node_modules&lt;/code&gt; folder use disk space if packages are stored in a global store?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://pnpm.io/motivation&#34;&gt;How pnpm work&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;folder-structure-of-nextjs-project&#34;&gt;folder structure of next.js project&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ tree -a -L 1              
├── .next     # Auto-generated build output directory, created after running next build
├── next.config.ts       # Next.js configuration file in TypeScript
├── node_modules         # Dependencies installed by package manager (pnpm in this case)
├── package.json         # Project metadata and dependencies
├── public              # Static files served at runtime (images, fonts, etc.)
....
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;learn-to-understand-warnings&#34;&gt;learn to understand warnings&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm i @vercel/postgres
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;WARN Issues with peer dependencies found
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;└─┬ next 15.0.0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  ├── ✕ unmet peer react@&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;^18.2.0 || 19.0.0-rc-65a56d0e-20241020&amp;#34;&lt;/span&gt;: found 19.0.0-rc-cd22717c-20241013
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  └── ✕ unmet peer react-dom@&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;^18.2.0 || 19.0.0-rc-65a56d0e-20241020&amp;#34;&lt;/span&gt;: found 19.0.0-rc-cd22717c-20241013
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Done in 1.2s
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&amp;ldquo;peer dependencies&amp;rdquo; 通常翻译为&amp;quot;同级依赖&amp;quot;, 它表示一个包要求宿主环境中必须安装特定的其他包才能正常工作, 举个例子：如果你安装一个 React 组件库, 若它将 React 列为 peer dependency, 这意味着这个组件库期望你的项目中已经安装了 React, 而不是它自己携带一个 React 副本&lt;/li&gt;
&lt;li&gt;&lt;code&gt;unmet peer react@&amp;quot;^18.2.0 || 19.0.0-rc-65a56d0e-20241020&amp;quot;: found 19.0.0-rc-cd22717c-20241013&lt;/code&gt;: 这个包（Next.js）要求项目使用的 React 版本必须是：应该为 18.2.0 或更高的 18.x 版本（ &lt;code&gt;^18.2.0&lt;/code&gt; ）或者是特定的 RC 版本 &lt;code&gt;19.0.0-rc-65a56d0e-20241020&lt;/code&gt;, 但是在项目中找到的是另一个 RC 版本：&lt;code&gt;19.0.0-rc-cd22717c-20241013&lt;/code&gt;, 版本不匹配，所以系统发出警告&lt;/li&gt;
&lt;/ul&gt;
</content>
    </item>
    
    <item>
      <title>npm install 总是安装到全局目录排查与解决</title>
      <link>https://blog.jiyi27.com/posts/bugs/001-npm-install-locally/</link>
      <pubDate>Tue, 27 Jun 2023 11:24:35 +0000</pubDate>
      
      <guid>https://blog.jiyi27.com/posts/bugs/001-npm-install-locally/</guid>
      <description>&lt;p&gt;使用 &lt;code&gt;npm install xxx&lt;/code&gt;, 然后总是安装到 &lt;code&gt;~/node_modules/&lt;/code&gt;, 查了好多, 有的说用 &lt;code&gt;npm config list   &lt;/code&gt;查看 global 的值, 改为 false 什么, 都没有用, 卸载 node 和 npm 重装依旧不能解决,&lt;/p&gt;</description>
      <content>&lt;p&gt;使用 &lt;code&gt;npm install xxx&lt;/code&gt;, 然后总是安装到 &lt;code&gt;~/node_modules/&lt;/code&gt;, 查了好多, 有的说用 &lt;code&gt;npm config list   &lt;/code&gt;查看 global 的值, 改为 false 什么, 都没有用, 卸载 node 和 npm 重装依旧不能解决,&lt;/p&gt;
&lt;p&gt;最后删除了  &lt;code&gt;~/node_modules/&lt;/code&gt; 文件夹和 &lt;code&gt;~/&lt;/code&gt; 下的所有 npm 相关文件夹, 然后进入项目文件夹, 重新运行 &lt;code&gt;npm install xxx&lt;/code&gt; 后本地文件夹自动创建 &lt;code&gt;node_modules&lt;/code&gt;, 安装成功.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ mkdir jslearn &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; cd jslearn
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ npm install cors
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;added &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; packages in 466ms
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ ls
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;node_modules      package-lock.json package.json
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 你看不用 npm init&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;在知乎看到的回答:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;npm的原理大概就是从当前目录往上找，找到哪个目录有node_modules就认为这才是真正的项目目录，所以东西全给装那里面去, 所以不仅仅是User根目录的问题，你得保证从你当前的目录开始一直到根目录都没有node_modules，npm才会“正常”地把东西放到当前目录下的node_modules里 &lt;a href=&#34;https://www.zhihu.com/question/33302274/answer/56276831&#34;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;另外:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;-S&lt;/code&gt; is shorthand for &lt;code&gt;--save&lt;/code&gt;, and it adds the package you&amp;rsquo;re installing to the dependencies in your &lt;code&gt;package.json&lt;/code&gt; file (which can be created with &lt;code&gt;npm init&lt;/code&gt;). However, &lt;code&gt;--save&lt;/code&gt; or &lt;code&gt;-S&lt;/code&gt; is totally unnecessary if you&amp;rsquo;re using npm 5 or above since it&amp;rsquo;s done by default. &lt;a href=&#34;https://stackoverflow.com/a/58475949/16317008&#34;&gt;https://stackoverflow.com/a/58475949/16317008&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</content>
    </item>
    
  </channel>
</rss>
