<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Next.js on ä¸ºéœœçš„åšå®¢</title>
    <link>https://blog.jiyi27.com/tags/next.js/</link>
    <description>Recent content in Next.js on ä¸ºéœœçš„åšå®¢</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Mon, 16 Dec 2024 23:38:39 +0000</lastBuildDate><atom:link href="https://blog.jiyi27.com/tags/next.js/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Render Phases - React.js</title>
      <link>https://blog.jiyi27.com/posts/frontend/next-js/005-render-phases-useeffect-react/</link>
      <pubDate>Mon, 16 Dec 2024 23:38:39 +0000</pubDate>
      
      <guid>https://blog.jiyi27.com/posts/frontend/next-js/005-render-phases-useeffect-react/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://eliav2.github.io/how-react-hooks-work/&#34;&gt;ä¸€ç¯‡æ–‡ç« &lt;/a&gt;æ€»ç»“çš„æ¯”è¾ƒå¥½, æ¸²æŸ“çš„ä¸¤ä¸ªé˜¶æ®µ: Render, Commit:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Render&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;construction of sub React-tree by recursively calling the React component function body (or the render method on class components)- in this article we call this &lt;strong&gt;update phase&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;passing this React-tree to the renderer that will figure out whatâ€™s sections of the DOM needs to be updated.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Commit&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the renderer updates the DOM using &lt;a href=&#34;https://reactjs.org/docs/reconciliation.html#the-diffing-algorithm&#34;&gt;Reactâ€™s â€œdiffingâ€ algorithm&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;now the browser DOM is fully updated in memory but the browser has not painted it to the UI(the event loop has not yet ended). means that any access to the DOM here will get the updated DOM properties(such location and dimensions), but changes has not flushed to the UI just yet.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;useLayoutEffect cleanup from previous render&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://reactjs.org/docs/hooks-reference.html#uselayouteffect&#34;&gt;useLayoutEffect&lt;/a&gt;&lt;/strong&gt; is now called.&lt;/li&gt;
&lt;li&gt;javascript event loop has ended, and the browser paints the updated DOM (the UI is fully updated).&lt;/li&gt;
&lt;li&gt;&lt;em&gt;useEffect cleanup from previous render&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://reactjs.org/docs/hooks-reference.html#useeffect&#34;&gt;useEffect&lt;/a&gt;&lt;/strong&gt; is now called (asynchronously).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ³¨æ„è¿™é‡Œçš„ &lt;code&gt;useEffect cleanup from previous render&lt;/code&gt;, æ¸…ç†å®é™…ä¸ŠæŒ‡çš„æ˜¯ æ‰§è¡Œ useEffect è¿”å›çš„å‡½æ•°,  å³ useEffect å‡½æ•°ä½“ä¼šåœ¨ commit é˜¶æ®µæ‰§è¡Œç„¶åè¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•°(å¯é€‰), åœ¨ä¸‹æ¬¡ commit é˜¶æ®µæ—¶, React ä¼šå…ˆè°ƒç”¨ä¸Šæ¬¡ useEffect è¿”å›çš„æ¸…ç†å‡½æ•°, ç„¶åå†æ‰§è¡Œ useEffect,&lt;/p&gt;</description>
      <content>&lt;p&gt;&lt;a href=&#34;https://eliav2.github.io/how-react-hooks-work/&#34;&gt;ä¸€ç¯‡æ–‡ç« &lt;/a&gt;æ€»ç»“çš„æ¯”è¾ƒå¥½, æ¸²æŸ“çš„ä¸¤ä¸ªé˜¶æ®µ: Render, Commit:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Render&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;construction of sub React-tree by recursively calling the React component function body (or the render method on class components)- in this article we call this &lt;strong&gt;update phase&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;passing this React-tree to the renderer that will figure out whatâ€™s sections of the DOM needs to be updated.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Commit&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the renderer updates the DOM using &lt;a href=&#34;https://reactjs.org/docs/reconciliation.html#the-diffing-algorithm&#34;&gt;Reactâ€™s â€œdiffingâ€ algorithm&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;now the browser DOM is fully updated in memory but the browser has not painted it to the UI(the event loop has not yet ended). means that any access to the DOM here will get the updated DOM properties(such location and dimensions), but changes has not flushed to the UI just yet.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;useLayoutEffect cleanup from previous render&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://reactjs.org/docs/hooks-reference.html#uselayouteffect&#34;&gt;useLayoutEffect&lt;/a&gt;&lt;/strong&gt; is now called.&lt;/li&gt;
&lt;li&gt;javascript event loop has ended, and the browser paints the updated DOM (the UI is fully updated).&lt;/li&gt;
&lt;li&gt;&lt;em&gt;useEffect cleanup from previous render&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://reactjs.org/docs/hooks-reference.html#useeffect&#34;&gt;useEffect&lt;/a&gt;&lt;/strong&gt; is now called (asynchronously).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ³¨æ„è¿™é‡Œçš„ &lt;code&gt;useEffect cleanup from previous render&lt;/code&gt;, æ¸…ç†å®é™…ä¸ŠæŒ‡çš„æ˜¯ æ‰§è¡Œ useEffect è¿”å›çš„å‡½æ•°,  å³ useEffect å‡½æ•°ä½“ä¼šåœ¨ commit é˜¶æ®µæ‰§è¡Œç„¶åè¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•°(å¯é€‰), åœ¨ä¸‹æ¬¡ commit é˜¶æ®µæ—¶, React ä¼šå…ˆè°ƒç”¨ä¸Šæ¬¡ useEffect è¿”å›çš„æ¸…ç†å‡½æ•°, ç„¶åå†æ‰§è¡Œ useEffect,&lt;/p&gt;
&lt;p&gt;è¿”å›æ¸…ç†å‡½æ•°å¯ä»¥é˜²æ­¢å†…å­˜æ³„æ¼, ä¸è¦å¿˜äº†, useEffect æ˜¯ç”¨æ¥æ‰§è¡Œå‰¯ä½œç”¨çš„åœ°æ–¹, æ¯”å¦‚æˆ‘ä»¬å¯èƒ½åœ¨ useEffect ä¸­å»ºç«‹äº† TCP è¿æ¥, ç»„ä»¶å¤šæ¬¡æ¸²æŸ“, æˆ‘ä»¬å»ºç«‹å¤šä¸ªTCPè¿æ¥, å¯æ˜¯åŒæ—¶åªä¿å­˜ä¸€ä¸ªè¿æ¥æ‰æ˜¯åˆç†çš„, è¿™æ—¶å€™æ¸…ç†ä¹‹å‰çš„, å°±æ˜¾å¾—å¾ˆå¿…è¦:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// 1. æ•°æ®è·å– - æœ€å¸¸è§çš„ç”¨ä¾‹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UserProfile&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; () =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;useEffect&lt;/span&gt;(() =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// å®šä¹‰å¼‚æ­¥å‡½æ•°æ¥è·å–ç”¨æˆ·æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;fetchUser&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt; () =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;response&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;fetch&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;https://api.example.com/user&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    };
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fetchUser&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// æ¸…ç†å‡½æ•° - ç»„ä»¶å¸è½½æ—¶å–æ¶ˆè¯·æ±‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; () =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#75715e&#34;&gt;// å¦‚æœä½¿ç”¨ axiosï¼Œå¯ä»¥ç”¨ cancelToken
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;      &lt;span style=&#34;color:#75715e&#34;&gt;// å¦‚æœä½¿ç”¨ AbortControllerï¼Œå¯ä»¥åœ¨è¿™é‡Œ abort
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    };
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }, []); &lt;span style=&#34;color:#75715e&#34;&gt;// ç©ºä¾èµ–æ•°ç»„æ„å‘³ç€åªåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;loading&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;?&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;div&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Loading&lt;/span&gt;...&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;/div&amp;gt; : &amp;lt;div&amp;gt;{user?.name}&amp;lt;/div&amp;gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åˆæˆ–è€…æ˜¯å®šæ—¶å™¨, æœ‰å¯èƒ½å‘ç”Ÿçš„æ˜¯, ä¸Šæ¬¡æ¸²æŸ“å› è°ƒç”¨ useEffect å¯åŠ¨çš„å®šæ—¶å™¨è¿˜æ²¡ç»“æŸ, åˆå‘ç”Ÿäº†ä¸€æ¬¡æ–°çš„æ¸²æŸ“, æ­¤æ—¶åœ¨è°ƒç”¨ useEffect ä¹‹å‰, æ¸…ç†æ‰ä¹‹å‰çš„çš„å®šæ—¶å™¨:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// 2. ç›‘å¬çŠ¶æ€å˜åŒ– - å“åº”ç‰¹å®šçŠ¶æ€çš„å˜åŒ–
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SearchComponent&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; () =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; [&lt;span style=&#34;color:#a6e22e&#34;&gt;searchTerm&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;setSearchTerm&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; [&lt;span style=&#34;color:#a6e22e&#34;&gt;results&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;setResults&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;([]);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;useEffect&lt;/span&gt;(() =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// é˜²æŠ–å¤„ç†ï¼Œé¿å…é¢‘ç¹è¯·æ±‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;debounceTimeout&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;setTimeout&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt; () =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;searchTerm&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;response&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;fetch&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;`/api/search?q=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;searchTerm&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }, &lt;span style=&#34;color:#ae81ff&#34;&gt;500&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// æ¸…ç†å‡½æ•° - å–æ¶ˆä¹‹å‰çš„å»¶æ—¶æ“ä½œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; () =&amp;gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;clearTimeout&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;debounceTimeout&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }, [&lt;span style=&#34;color:#a6e22e&#34;&gt;searchTerm&lt;/span&gt;]); &lt;span style=&#34;color:#75715e&#34;&gt;// ä¾èµ–äº searchTermï¼Œæ¯æ¬¡æœç´¢è¯å˜åŒ–éƒ½ä¼šè§¦å‘
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;input&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#a6e22e&#34;&gt;value&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;searchTerm&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#a6e22e&#34;&gt;onChange&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;{(&lt;span style=&#34;color:#a6e22e&#34;&gt;e&lt;/span&gt;) =&amp;gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;setSearchTerm&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;e&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;target&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;value&lt;/span&gt;)}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  );
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ç”¨æˆ·å¿«é€Ÿè¾“å…¥ abc&lt;/li&gt;
&lt;li&gt;SearchComponent è¢«æ¸²æŸ“ä¸‰æ¬¡, å› ä¸º searchTerm æ”¹å˜äº†ä¸‰æ¬¡, a -&amp;gt; ab -&amp;gt; abc&lt;/li&gt;
&lt;li&gt;è¾“å…¥bçš„æ—¶å€™, ç»„ä»¶è¢«é‡æ–°æ¸²æŸ“( render é˜¶æ®µ), React æ‰§è¡Œä¸Šæ¬¡ useEffect è¿”å›çš„æ¸…ç†å‡½æ•°(commit é˜¶æ®µ), å³ å®šæ—¶å™¨è¢«æ¸…ç†, è¯·æ±‚ä¹Ÿä¸ä¼šå‘å‡º&lt;/li&gt;
&lt;li&gt;è¾“å‡º c, æ­¤æ—¶ç»„ä»¶é‡æ–°è¢«æ¸²æŸ“, åŒç†, æ‰§è¡Œæ¸…ç†å‡½æ•°, å†æ¬¡è°ƒç”¨ useEffect, å³åªä¼šæ‰§è¡Œä¸€æ¬¡è¯·æ±‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;éƒ½çŸ¥é“, åœ¨ Render Phase å·²ç»å®Œæˆäº†æ‰€æœ‰æ•°æ®çš„è®¡ç®—å’Œå®Œæ•´çš„ Virtual DOM çš„ç”Ÿæˆ, Commit Phase åˆ™è´Ÿè´£æŠŠè¿™äº›å˜æ›´å®é™…åº”ç”¨åˆ°æµè§ˆå™¨çš„ DOM ä¸­, å¹¶å¤„ç†å‰¯ä½œç”¨ useEffect,&lt;/p&gt;
&lt;p&gt;å¯æ˜¯æœ‰ä¸ªé—®é¢˜, ç»„ä»¶å·²ç»æ¸²æŸ“å®Œäº†, å†æ‰§è¡Œ useEffect è¿˜æœ‰ä»€ä¹ˆæ„ä¹‰å‘¢, useEffect ä¸å°±æ˜¯ä¸ºäº†æ‹‰å–æ•°æ® ç„¶åæ’å…¥åˆ°ç»„ä»¶å—? çœ‹ä¾‹å­:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UserProfile() {&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; [&lt;span style=&#34;color:#a6e22e&#34;&gt;user&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;setUser&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;useState&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;null&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// ç¬¬ä¸€æ¬¡æ¸²æŸ“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;1. Render Phase æ‰§è¡Œ&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;content&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;user&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;?&lt;/span&gt; &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;h1&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Welcome&lt;/span&gt;, {&lt;span style=&#34;color:#a6e22e&#34;&gt;user&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;}&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;h1&lt;/span&gt;&amp;gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;h1&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Loading&lt;/span&gt;...&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;h1&lt;/span&gt;&amp;gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;useEffect&lt;/span&gt;(() &lt;span style=&#34;color:#f92672&#34;&gt;=&amp;gt;&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;3. Commit Phase ä¹‹åæ‰§è¡Œ Effect&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// è·å–æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;fetch&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/api/user&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      .&lt;span style=&#34;color:#a6e22e&#34;&gt;then&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;json&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      .&lt;span style=&#34;color:#a6e22e&#34;&gt;then&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;userData&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&amp;gt;&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;4. æ•°æ®åˆ°è¾¾ï¼Œè°ƒç”¨ setUser&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;setUser&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;userData&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      });
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }, []);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2. è¿”å› JSX&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;content&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‰§è¡Œçš„é€»è¾‘æ˜¯&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç»„ä»¶é¦–æ¬¡æ¸²æŸ“ï¼Œæ˜¾ç¤º &amp;ldquo;Loading&amp;hellip;&amp;rdquo;&lt;/li&gt;
&lt;li&gt;DOM æ›´æ–°å®Œæˆ&lt;/li&gt;
&lt;li&gt;useEffect æ‰§è¡Œï¼Œå‘èµ· API è¯·æ±‚&lt;/li&gt;
&lt;li&gt;æ•°æ®è¿”å›åï¼ŒsetUser è§¦å‘æ–°çš„æ¸²æŸ“&lt;/li&gt;
&lt;li&gt;ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œè¿™æ¬¡æ˜¾ç¤º &amp;ldquo;Welcome, [name]&amp;rdquo;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ‰€ä»¥ useEffect ä¸æ˜¯ä¸ºäº†&amp;quot;æŠŠæ•°æ®æ’å…¥å·²æ¸²æŸ“çš„è§†å›¾&amp;quot;ï¼Œè€Œæ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è§¦å‘ä¸€ä¸ªæ–°çš„æ•°æ®è·å–æµç¨‹&lt;/li&gt;
&lt;li&gt;é€šè¿‡ setState å¼•å‘æ–°çš„&lt;strong&gt;æ¸²æŸ“å‘¨æœŸ&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-typescript&#34; data-lang=&#34;typescript&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ğŸš« é”™è¯¯ç†è§£ï¼šè§†å›¾æ˜¯ä¸ªæ¡†æ¶ï¼Œç­‰ç€æ•°æ®å¡«å……
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;user&amp;#34;&lt;/span&gt;&amp;gt;{&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;ç­‰å¾…&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;useEffect&lt;/span&gt; &lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;å¡«å……æ•°æ®&lt;/span&gt;}&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// âœ… æ­£ç¡®ç†è§£ï¼šæ¯æ¬¡éƒ½æ˜¯å®Œæ•´çš„æ¸²æŸ“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ç¬¬ä¸€æ¬¡æ¸²æŸ“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;user&amp;#34;&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Loading&lt;/span&gt;...&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// æ•°æ®åˆ°è¾¾åçš„ç¬¬äºŒæ¬¡æ¸²æŸ“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;user&amp;#34;&lt;/span&gt;&amp;gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Welcome&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;Alice&lt;/span&gt;&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;useEffect çš„ä¾èµ–æ˜¯ç©ºæ•°ç»„, è¡¨ç¤ºåªåœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“åæ‰§è¡Œä¸€æ¬¡, ä¹‹åä¸ä¼šå†æ‰§è¡Œ,&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>NextAuth V5</title>
      <link>https://blog.jiyi27.com/posts/frontend/next-js/004-next-auth/</link>
      <pubDate>Sun, 08 Dec 2024 17:13:20 +0000</pubDate>
      
      <guid>https://blog.jiyi27.com/posts/frontend/next-js/004-next-auth/</guid>
      <description>&lt;p&gt;NextAuth v5 é…ç½®é€šå¸¸åˆ†ä¸ºä¸¤ä¸ªæ–‡ä»¶(åœ¨æ ¹ç›®å½•)ï¼š&lt;code&gt;auth.config.ts&lt;/code&gt; å’Œ &lt;code&gt;auth.ts&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å½“æœ‰æ–°çš„è¯·æ±‚è¿›æ¥æ—¶ï¼ŒNext.js é¦–å…ˆä¼šæ£€æŸ¥ middleware.ts ä¸­çš„ config é…ç½®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// middleware.ts
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NextAuth&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;authConfig&lt;/span&gt;).&lt;span style=&#34;color:#a6e22e&#34;&gt;auth&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ä¸åŒ¹é… /api è·¯å¾„, ä¸åŒ¹é… /_next/static è·¯å¾„...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;config&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;matcher&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/((?!api|_next/static|_next/image|.*\\.png$).*)&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœè¯·æ±‚è·¯å¾„åŒ¹é…ä¸Šè¿°è§„åˆ™ï¼ŒNext.js å°±ä¼šæ‰§è¡Œ &lt;code&gt;middleware.ts&lt;/code&gt; ä¸­é»˜è®¤å¯¼å‡ºçš„å‡½æ•°, ä¹Ÿå°±æ˜¯ä¸Šé¢çš„ &lt;code&gt;export default NextAuth(authConfig).auth&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ³¨æ„, è¿™é‡Œçš„ &lt;code&gt;NextAuth(authConfig).auth&lt;/code&gt; å‡½æ•°å’Œ &lt;code&gt;auth.ts&lt;/code&gt; å¯¼å‡ºçš„é‚£ä¸ª auth å‡½æ•°æ˜¯ä¸€æ ·çš„, ä½†ä»–ä»¬å¹¶ä¸æ˜¯åŒä¸€ä¸ªå‡½æ•°, å¯ä»¥çœ‹åˆ° &lt;code&gt;auth.ts&lt;/code&gt; å’Œ &lt;code&gt;middleware.ts&lt;/code&gt; éƒ½ç”¨åˆ°äº† &lt;code&gt;auth.config.ts&lt;/code&gt;, å°±æ˜¯é€šè¿‡ &lt;code&gt;NextAuth(authConfig)&lt;/code&gt; æ¥å¯¼å‡º auth å‡½æ•°.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// auth.ts
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; { &lt;span style=&#34;color:#a6e22e&#34;&gt;auth&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;signIn&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;signOut&lt;/span&gt; } &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NextAuth&lt;/span&gt;({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  ...&lt;span style=&#34;color:#a6e22e&#34;&gt;authConfig&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;providers&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; [...]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;})
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸ª auth å‡½æ•°ä¸»è¦å°±æ˜¯ä¼šæ‰§è¡Œ &lt;code&gt;authConfig&lt;/code&gt; ä¸­çš„ authorized å›è°ƒ, ä¹Ÿå°±æ˜¯&lt;code&gt;auth.config.ts&lt;/code&gt; ä¸­çš„ authorized callback, æ ¹æ® authorized çš„è¿”å›å€¼å†³å®šæ˜¯å¦å…è®¸è®¿é—®:&lt;/p&gt;</description>
      <content>&lt;p&gt;NextAuth v5 é…ç½®é€šå¸¸åˆ†ä¸ºä¸¤ä¸ªæ–‡ä»¶(åœ¨æ ¹ç›®å½•)ï¼š&lt;code&gt;auth.config.ts&lt;/code&gt; å’Œ &lt;code&gt;auth.ts&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å½“æœ‰æ–°çš„è¯·æ±‚è¿›æ¥æ—¶ï¼ŒNext.js é¦–å…ˆä¼šæ£€æŸ¥ middleware.ts ä¸­çš„ config é…ç½®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// middleware.ts
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NextAuth&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;authConfig&lt;/span&gt;).&lt;span style=&#34;color:#a6e22e&#34;&gt;auth&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ä¸åŒ¹é… /api è·¯å¾„, ä¸åŒ¹é… /_next/static è·¯å¾„...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;config&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;matcher&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/((?!api|_next/static|_next/image|.*\\.png$).*)&amp;#39;&lt;/span&gt;],
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœè¯·æ±‚è·¯å¾„åŒ¹é…ä¸Šè¿°è§„åˆ™ï¼ŒNext.js å°±ä¼šæ‰§è¡Œ &lt;code&gt;middleware.ts&lt;/code&gt; ä¸­é»˜è®¤å¯¼å‡ºçš„å‡½æ•°, ä¹Ÿå°±æ˜¯ä¸Šé¢çš„ &lt;code&gt;export default NextAuth(authConfig).auth&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ³¨æ„, è¿™é‡Œçš„ &lt;code&gt;NextAuth(authConfig).auth&lt;/code&gt; å‡½æ•°å’Œ &lt;code&gt;auth.ts&lt;/code&gt; å¯¼å‡ºçš„é‚£ä¸ª auth å‡½æ•°æ˜¯ä¸€æ ·çš„, ä½†ä»–ä»¬å¹¶ä¸æ˜¯åŒä¸€ä¸ªå‡½æ•°, å¯ä»¥çœ‹åˆ° &lt;code&gt;auth.ts&lt;/code&gt; å’Œ &lt;code&gt;middleware.ts&lt;/code&gt; éƒ½ç”¨åˆ°äº† &lt;code&gt;auth.config.ts&lt;/code&gt;, å°±æ˜¯é€šè¿‡ &lt;code&gt;NextAuth(authConfig)&lt;/code&gt; æ¥å¯¼å‡º auth å‡½æ•°.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// auth.ts
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; { &lt;span style=&#34;color:#a6e22e&#34;&gt;auth&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;signIn&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;signOut&lt;/span&gt; } &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NextAuth&lt;/span&gt;({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  ...&lt;span style=&#34;color:#a6e22e&#34;&gt;authConfig&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;providers&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; [...]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;})
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸ª auth å‡½æ•°ä¸»è¦å°±æ˜¯ä¼šæ‰§è¡Œ &lt;code&gt;authConfig&lt;/code&gt; ä¸­çš„ authorized å›è°ƒ, ä¹Ÿå°±æ˜¯&lt;code&gt;auth.config.ts&lt;/code&gt; ä¸­çš„ authorized callback, æ ¹æ® authorized çš„è¿”å›å€¼å†³å®šæ˜¯å¦å…è®¸è®¿é—®:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-ts&#34; data-lang=&#34;ts&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// auth.config.ts
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;authConfig&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;pages&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;signIn&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/login&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    },
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;callbacks&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;authorized&lt;/span&gt;(...) {...},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    },
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;providers&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; [],
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;} &lt;span style=&#34;color:#a6e22e&#34;&gt;satisfies&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NextAuthConfig&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯ä»¥çœ‹å‡º, åœ¨ &lt;code&gt;auth.ts&lt;/code&gt; ä¸­æˆ‘ä»¬åªæ˜¯å°† &lt;code&gt;auth.config.ts&lt;/code&gt; çš„ &lt;code&gt;authConfig&lt;/code&gt; å±•å¼€äº†, å…¶å®å¯ä»¥ä¸éœ€è¦ &lt;code&gt;auth.config.ts&lt;/code&gt; æ–‡ä»¶, ç›´æ¥æŠŠè¿™ä¸ªé…ç½®å†™åˆ° &lt;code&gt;auth.ts&lt;/code&gt; ä¸­å°±è¡Œ, ä½†æ˜¯ä¸æ¨èè¿™ä¹ˆåš, å¦‚æœåˆå¹¶çš„è¯, é‚£ &lt;code&gt;middleware.ts&lt;/code&gt; åªèƒ½é€šè¿‡å¯¼å…¥ &lt;code&gt;auth.ts&lt;/code&gt; æ¥ä½¿ç”¨ &lt;code&gt;auth&lt;/code&gt; å‡½æ•°, å¯æ˜¯ &lt;code&gt;auth.ts&lt;/code&gt;  ä¸­è¿˜æœ‰å…¶ä»–ä¸œè¥¿, æ¯”å¦‚ providers, è¿™æ ·çš„è¯ ä¸­é—´ä»¶ä¼šå¯¼å…¥æ•´ä¸ª &lt;code&gt;auth.ts&lt;/code&gt; æ–‡ä»¶, æ•°æ®åº“å®¢æˆ·ç«¯ (prisma)æ‰€æœ‰è®¤è¯æä¾›å•† (GitHub ç­‰), è¿™æ ·çš„è¯, ä¸­é—´ä»¶å°±ä¼šå˜çš„å¾ˆå¤§,&lt;/p&gt;
&lt;p&gt;å½“æˆ‘ä»¬ç™»å½•çš„æ—¶å€™, åŸºæœ¬ä¸Šå¯ä»¥çœ‹åˆ°çš„æ‰§è¡Œé¡ºåºæ˜¯:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;1. auth.config.ts æ–‡ä»¶è¢«åŠ è½½
2. middleware.ts æ–‡ä»¶è¢«åŠ è½½ (ä»…åœ¨åˆå§‹ç¼–è¯‘é¡¹ç›®åæ‰§è¡Œä¸€æ¬¡, ä¹‹åä¸ä¼šè¢«é‡å¤åŠ è½½)
3. auth.ts æ–‡ä»¶è¢«åŠ è½½
4. authorized callback è¢«æ‰§è¡Œ { url: &amp;#39;/dashboard&amp;#39;, isLoggedIn: false }
4. authorized callback è¢«æ‰§è¡Œ { url: &amp;#39;/login&amp;#39;, isLoggedIn: false }
4. authorized callback è¢«æ‰§è¡Œ { url: &amp;#39;/dashboard&amp;#39;, isLoggedIn: false }
4. authorized callback è¢«æ‰§è¡Œ { url: &amp;#39;/login&amp;#39;, isLoggedIn: false }
4. authorized callback è¢«æ‰§è¡Œ { url: &amp;#39;/login&amp;#39;, isLoggedIn: false }
5. authorize callback è¢«æ‰§è¡Œ (ä»…åœ¨ç™»å½•æ—¶)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯ä»¥çœ‹å‡º, åªè¦è®¿é—®ç¬¦åˆ middleware è§„åˆ™çš„ url, é‚£ authorized callback å°±ä¼šè¢«æ‰§è¡Œä¸€æ¬¡, ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯¼å‡ºçš„ &lt;code&gt;export default NextAuth(authConfig).auth;&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Error &lt;code&gt;headers()&lt;/code&gt; should be awaited&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Error:  In route /login a cookie property was accessed directly with &lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;cookies&lt;span style=&#34;color:#f92672&#34;&gt;()&lt;/span&gt;.set&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;authjs.session-token&amp;#39;&lt;/span&gt;, ...&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;. &lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;cookies&lt;span style=&#34;color:#f92672&#34;&gt;()&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt; should be awaited before using its value.
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Error:  In route /login headers were iterated over. &lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;headers&lt;span style=&#34;color:#f92672&#34;&gt;()&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt; should be awaited before using its value.
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.....
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This is due to updating to Next15. Headers, Page/Layout Params and cookies are now asynchronous. &lt;a href=&#34;https://nextjs.org/docs/messages/sync-dynamic-apis&#34;&gt;click to learn more&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.reddit.com/r/nextjs/comments/1g9l35r/comment/lu4d2ik/?utm_source=share&amp;amp;utm_medium=web3x&amp;amp;utm_name=web3xcss&amp;amp;utm_term=1&amp;amp;utm_content=share_button&#34;&gt;Solution&lt;/a&gt;: try &lt;code&gt;$pnpm i next-auth@beta&lt;/code&gt;&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>npm vs npx vs pnpm</title>
      <link>https://blog.jiyi27.com/posts/frontend/next-js/001-npm-npx-pnpm/</link>
      <pubDate>Sun, 08 Dec 2024 15:20:22 +0000</pubDate>
      
      <guid>https://blog.jiyi27.com/posts/frontend/next-js/001-npm-npx-pnpm/</guid>
      <description>&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ npx create-next-app@latest learn-by-example --use-pnpm
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;âœ” Would you like to use TypeScript? â€¦ No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;âœ” Would you like to use ESLint? â€¦ No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;âœ” Would you like to use Tailwind CSS? â€¦ No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;âœ” Would you like your code inside a &lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;src/&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt; directory? â€¦ No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;âœ” Would you like to use App Router? &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;recommended&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; â€¦ No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;âœ” Would you like to use Turbopack &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;next dev&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;? â€¦ No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;âœ” Would you like to customize the import alias &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;@/*&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt; by default&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;? â€¦ No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm add date-fns lucide-react
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm dlx shadcn@latest init
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm dlx shadcn@latest add textarea
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;npm-vs-npx-vs-pnmp&#34;&gt;npm vs npx vs pnmp&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# download and install Node.js&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# https://nodejs.org/en/download/package-manager&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;brew install node@22
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;node -v &lt;span style=&#34;color:#75715e&#34;&gt;# should print `v22.12.0`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;npm -v &lt;span style=&#34;color:#75715e&#34;&gt;# should print `10.9.0`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# install pnpm&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# https://pnpm.io/installation&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl -fsSL https://get.pnpm.io/install.sh | sh -
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;npm&lt;/code&gt; comes with &lt;code&gt;Node.js&lt;/code&gt;, and &lt;code&gt;npx&lt;/code&gt; comes with &lt;code&gt;npm&lt;/code&gt;. &lt;strong&gt;In order to use &lt;code&gt;npm&lt;/code&gt; or &lt;code&gt;npx&lt;/code&gt;, you need install &lt;code&gt;node.js&lt;/code&gt;.&lt;/strong&gt;&lt;/p&gt;</description>
      <content>&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ npx create-next-app@latest learn-by-example --use-pnpm
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;âœ” Would you like to use TypeScript? â€¦ No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;âœ” Would you like to use ESLint? â€¦ No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;âœ” Would you like to use Tailwind CSS? â€¦ No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;âœ” Would you like your code inside a &lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;src/&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt; directory? â€¦ No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;âœ” Would you like to use App Router? &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;recommended&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; â€¦ No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;âœ” Would you like to use Turbopack &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;next dev&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;? â€¦ No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;âœ” Would you like to customize the import alias &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;@/*&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt; by default&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;? â€¦ No / Yes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm add date-fns lucide-react
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm dlx shadcn@latest init
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm dlx shadcn@latest add textarea
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;npm-vs-npx-vs-pnmp&#34;&gt;npm vs npx vs pnmp&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# download and install Node.js&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# https://nodejs.org/en/download/package-manager&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;brew install node@22
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;node -v &lt;span style=&#34;color:#75715e&#34;&gt;# should print `v22.12.0`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;npm -v &lt;span style=&#34;color:#75715e&#34;&gt;# should print `10.9.0`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# install pnpm&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# https://pnpm.io/installation&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl -fsSL https://get.pnpm.io/install.sh | sh -
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;npm&lt;/code&gt; comes with &lt;code&gt;Node.js&lt;/code&gt;, and &lt;code&gt;npx&lt;/code&gt; comes with &lt;code&gt;npm&lt;/code&gt;. &lt;strong&gt;In order to use &lt;code&gt;npm&lt;/code&gt; or &lt;code&gt;npx&lt;/code&gt;, you need install &lt;code&gt;node.js&lt;/code&gt;.&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Node.js installation
â””â”€â”€ includes npm (Node Package Manager)
â””â”€â”€ includes npx (Node Package Execute)
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;npx create-react-app my-app
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;npm install some-package
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;NPM is a package manager for node.js, same as &lt;code&gt;pip&lt;/code&gt; for python, &lt;code&gt;pnmp&lt;/code&gt; is same as &lt;code&gt;npm&lt;/code&gt;, but more efficient&lt;/li&gt;
&lt;li&gt;npx æ˜¯ npm çš„ä¸€ä¸ªå·¥å…·, å®ƒå…è®¸æˆ‘ä»¬ç›´æ¥è¿è¡Œ npm åŒ…ä¸­çš„å‘½ä»¤è¡Œå·¥å…·, è€Œä¸éœ€è¦å…¨å±€å®‰è£…è¿™äº›å·¥å…·&lt;/li&gt;
&lt;li&gt;&lt;code&gt;create-next-app@latest&lt;/code&gt;: æ˜¯ Next.js å®˜æ–¹æä¾›çš„è„šæ‰‹æ¶å·¥å…·(scaffolding tool), create-next-app æ˜¯å·¥å…·çš„åç§°, @latest è¡¨ç¤ºä½¿ç”¨æœ€æ–°ç‰ˆæœ¬&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜ npx çš„ä½œç”¨:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# ä¸ä½¿ç”¨ npx çš„è¯,æˆ‘ä»¬éœ€è¦å…ˆå…¨å±€å®‰è£…&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;npm install -g create-next-app
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;create-next-app my-project
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# ä½¿ç”¨ npx,å¯ä»¥ç›´æ¥è¿è¡Œè€Œä¸éœ€è¦å®‰è£…&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;npx create-next-app@latest my-project
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;pnpm&#34;&gt;pnpm&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;è‡ªå·±çš„é¡¹ç›®æ·»åŠ ä¾èµ–, è¿è¡Œ &lt;code&gt;pnpm add xxx&lt;/code&gt;, ä¸è¦åœ¨é¡¹ç›®å¤–è¿è¡Œè¿™ä¸ªæŒ‡ä»¤&lt;/li&gt;
&lt;li&gt;å…‹éš†çš„åˆ«äººçš„é¡¹ç›®, è¿›å…¥é¡¹ç›®å, è¿è¡Œ &lt;code&gt;pnpm install&lt;/code&gt; å®‰è£…æ‰€æœ‰ä¾èµ–&lt;/li&gt;
&lt;li&gt;æŸ¥çœ‹ pnpm store è·¯å¾„ &lt;code&gt;pnpm store path&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æ¸…é™¤ pnpm stpre ç¼“å­˜ &lt;a href=&#34;https://pnpm.io/cli/store#prune&#34;&gt;&lt;code&gt;pnpm store prune&lt;/code&gt;&lt;/a&gt;: removes &lt;em&gt;unreferenced packages&lt;/em&gt; from the store. Unreferenced packages are packages that are not used by any projects on the system. Packages can become unreferenced after most installation operations, for instance when dependencies are made redundant.&lt;/li&gt;
&lt;li&gt;æŸ¥çœ‹æ‰€åœ¨é¡¹ç›®å·²å®‰è£…çš„æ‰€æœ‰ä¾èµ– &lt;code&gt;pnpm list&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;pnpm add xxx&lt;/code&gt; è™½ç„¶è¯¥å‘½ä»¤ä¼šæŠŠä¾èµ–å®‰è£…åˆ° pnpm store ä¸­, ä½†ä½ ä»åº”è¯¥åœ¨é¡¹ç›®é‡Œè¿è¡Œè¿™ä¸ªæŒ‡ä»¤, è€Œä¸æ˜¯éšæ„ä¸€ä¸ªåœ°æ–¹,&lt;/p&gt;
&lt;p&gt;&lt;code&gt;pnpm add xxx&lt;/code&gt;  ä¼šåœ¨è¿è¡Œè¯¥æŒ‡ä»¤çš„åœ°æ–¹ æ·»åŠ ä¸‰ä¸ªæ–‡ä»¶ &lt;code&gt;package.json&lt;/code&gt;, &lt;code&gt;pnpm-lock.yaml&lt;/code&gt;, &lt;code&gt;node_modules&lt;/code&gt;, å…¶ä¸­ &lt;code&gt;node_modules&lt;/code&gt; åŒ…å«äº†é€šè¿‡ç¬¦å·é“¾æ¥æŒ‡å‘ pnpm store ä¸­å®é™…ä¾èµ–åŒ…çš„é“¾æ¥, pnpm ä½¿ç”¨ç¬¦å·é“¾æ¥æ¥èŠ‚çœç£ç›˜ç©ºé—´&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å…¶å®ƒç”¨æ³•, ç±»ä¼¼ npm:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# å¼€å‘æ¨¡å¼&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm run dev    &lt;span style=&#34;color:#75715e&#34;&gt;# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œå®æ—¶ç¼–è¯‘ï¼Œæ–¹ä¾¿å¼€å‘&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# ç”Ÿäº§æ¨¡å¼&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm run build  &lt;span style=&#34;color:#75715e&#34;&gt;# æ„å»ºä¼˜åŒ–åçš„ç”Ÿäº§ç¯å¢ƒä»£ç &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm start      &lt;span style=&#34;color:#75715e&#34;&gt;# å¯åŠ¨ç”Ÿäº§ç¯å¢ƒæœåŠ¡å™¨&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;pnpm run&lt;/code&gt; is a command, and &lt;code&gt;dev&lt;/code&gt;, &lt;code&gt;build&lt;/code&gt;, and &lt;code&gt;start&lt;/code&gt; are scripts/commands defined in your project&amp;rsquo;s &lt;code&gt;package.json&lt;/code&gt; file.&lt;/p&gt;
&lt;p&gt;Here&amp;rsquo;s how a typical package.json might look:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;your-project&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;scripts&amp;#34;&lt;/span&gt;: {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;dev&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;next dev&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;build&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;next build&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;start&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;next start&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can try add a custom scripts to package.json, like:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;scripts&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;:&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;//...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;#34;custom&amp;#34;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;echo &amp;#39;my custom script&amp;#39;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Then run: &lt;code&gt;pnpm run custom&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;äº†è§£æ›´å¤š:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://pnpm.io/faq&#34;&gt;Why does my &lt;code&gt;node_modules&lt;/code&gt; folder use disk space if packages are stored in a global store?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://pnpm.io/motivation&#34;&gt;How pnpm work&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;folder-structure-of-nextjs-project&#34;&gt;folder structure of next.js project&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ tree -a -L 1              
â”œâ”€â”€ .next     # Auto-generated build output directory, created after running next build
â”œâ”€â”€ next.config.ts       # Next.js configuration file in TypeScript
â”œâ”€â”€ node_modules         # Dependencies installed by package manager (pnpm in this case)
â”œâ”€â”€ package.json         # Project metadata and dependencies
â”œâ”€â”€ public              # Static files served at runtime (images, fonts, etc.)
....
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;learn-to-understand-warnings&#34;&gt;learn to understand warnings&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ pnpm i @vercel/postgres
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;WARNâ€‰Issues with peer dependencies found
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;â””â”€â”¬ next 15.0.0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  â”œâ”€â”€ âœ• unmet peer react@&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;^18.2.0 || 19.0.0-rc-65a56d0e-20241020&amp;#34;&lt;/span&gt;: found 19.0.0-rc-cd22717c-20241013
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  â””â”€â”€ âœ• unmet peer react-dom@&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;^18.2.0 || 19.0.0-rc-65a56d0e-20241020&amp;#34;&lt;/span&gt;: found 19.0.0-rc-cd22717c-20241013
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Done in 1.2s
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&amp;ldquo;peer dependencies&amp;rdquo; é€šå¸¸ç¿»è¯‘ä¸º&amp;quot;åŒçº§ä¾èµ–&amp;quot;, å®ƒè¡¨ç¤ºä¸€ä¸ªåŒ…è¦æ±‚å®¿ä¸»ç¯å¢ƒä¸­å¿…é¡»å®‰è£…ç‰¹å®šçš„å…¶ä»–åŒ…æ‰èƒ½æ­£å¸¸å·¥ä½œ, ä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœä½ å®‰è£…ä¸€ä¸ª React ç»„ä»¶åº“, è‹¥å®ƒå°† React åˆ—ä¸º peer dependency, è¿™æ„å‘³ç€è¿™ä¸ªç»„ä»¶åº“æœŸæœ›ä½ çš„é¡¹ç›®ä¸­å·²ç»å®‰è£…äº† React, è€Œä¸æ˜¯å®ƒè‡ªå·±æºå¸¦ä¸€ä¸ª React å‰¯æœ¬&lt;/li&gt;
&lt;li&gt;&lt;code&gt;unmet peer react@&amp;quot;^18.2.0 || 19.0.0-rc-65a56d0e-20241020&amp;quot;: found 19.0.0-rc-cd22717c-20241013&lt;/code&gt;: è¿™ä¸ªåŒ…ï¼ˆNext.jsï¼‰è¦æ±‚é¡¹ç›®ä½¿ç”¨çš„ React ç‰ˆæœ¬å¿…é¡»æ˜¯ï¼šåº”è¯¥ä¸º 18.2.0 æˆ–æ›´é«˜çš„ 18.x ç‰ˆæœ¬ï¼ˆ &lt;code&gt;^18.2.0&lt;/code&gt; ï¼‰æˆ–è€…æ˜¯ç‰¹å®šçš„ RC ç‰ˆæœ¬ &lt;code&gt;19.0.0-rc-65a56d0e-20241020&lt;/code&gt;, ä½†æ˜¯åœ¨é¡¹ç›®ä¸­æ‰¾åˆ°çš„æ˜¯å¦ä¸€ä¸ª RC ç‰ˆæœ¬ï¼š&lt;code&gt;19.0.0-rc-cd22717c-20241013&lt;/code&gt;, ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œæ‰€ä»¥ç³»ç»Ÿå‘å‡ºè­¦å‘Š&lt;/li&gt;
&lt;/ul&gt;
</content>
    </item>
    
    <item>
      <title>SSR vs CSR</title>
      <link>https://blog.jiyi27.com/posts/frontend/next-js/003-ssr-csr-seo/</link>
      <pubDate>Sat, 07 Dec 2024 19:12:09 +0000</pubDate>
      
      <guid>https://blog.jiyi27.com/posts/frontend/next-js/003-ssr-csr-seo/</guid>
      <description>&lt;h2 id=&#34;csr-client-side-rendering&#34;&gt;CSR (Client Side Rendering)&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;1. æµè§ˆå™¨è¯·æ±‚é¡µé¢
ç”¨æˆ·åœ¨æµè§ˆå™¨è¾“å…¥ URLï¼Œå‘å‰ç«¯æœåŠ¡å™¨(æ¯”å¦‚ Nginx)å‘èµ·è¯·æ±‚

2. æœåŠ¡å™¨è¿”å› HTML
Nginx è¿”å›ä¸€ä¸ªåŸºç¡€çš„ HTML æ–‡ä»¶ï¼ŒåŒ…å«ï¼š
- åŸºæœ¬çš„ HTML ç»“æ„
- ä¸€ä¸ªæ ¹èŠ‚ç‚¹ `&amp;lt;div id=&amp;#34;root&amp;#34;&amp;gt;&amp;lt;/div&amp;gt;`
- æ‰“åŒ…åçš„ JS æ–‡ä»¶å¼•ç”¨ï¼ˆåŒ…å«äº† React åº“ä»£ç ã€æ‚¨çš„åº”ç”¨ä»£ç ç­‰æ‰€æœ‰ JS ä»£ç ï¼‰

3. æµè§ˆå™¨ä¸‹è½½ JS
æµè§ˆå™¨è§£æ HTML æ—¶å‘ç° JS æ–‡ä»¶å¼•ç”¨ï¼Œä¼šä¸‹è½½è¿™äº›æ–‡ä»¶ï¼ŒåŒ…æ‹¬ï¼š
- React åº“ä»£ç 
- React DOM åº“ä»£ç 
- å…¶ä»–ä¾èµ–åº“ä»£ç 
- æ‚¨çš„åº”ç”¨ä»£ç 
ï¼ˆè¿™äº›åœ¨ç”Ÿäº§ç¯å¢ƒé€šå¸¸ä¼šè¢«æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼‰

4. æ‰§è¡Œ JS ä»£ç 
æµè§ˆå™¨æŒ‰é¡ºåºæ‰§è¡Œä¸‹è½½çš„ JS ä»£ç ï¼š
- å…ˆæ‰§è¡Œ React åº“ä»£ç ï¼Œä½¿æµè§ˆå™¨å…·å¤‡è¿è¡Œ React çš„èƒ½åŠ›
- ç„¶åæ‰§è¡Œæ‚¨çš„åº”ç”¨ä»£ç ï¼Œè¿™äº›ä»£ç ä¼šä½¿ç”¨ React API æ¥åˆ›å»ºå’Œæ¸²æŸ“ç»„ä»¶

5. React å¼€å§‹å·¥ä½œ
React ä»£ç æ‰§è¡Œåï¼š
- åˆ›å»ºè™šæ‹Ÿ DOM
- å°†ç»„ä»¶æ¸²æŸ“åˆ° `#root` èŠ‚ç‚¹ä¸­
- å¦‚æœç»„ä»¶ä¸­æœ‰æ•°æ®è¯·æ±‚ï¼Œä¼šå‘èµ· API è¯·æ±‚
- ç­‰å¾…æ•°æ®è¿”å›åæ›´æ–°ç»„ä»¶æ˜¾ç¤º

6. æœ€ç»ˆæ¸²æŸ“å®Œæˆ
- é¡µé¢å±•ç¤ºå®Œæ•´å†…å®¹
- ç”¨æˆ·å¯ä»¥ä¸é¡µé¢äº¤äº’
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·å¯èƒ½ä¼šç»å†ï¼š1 å®Œå…¨ç©ºç™½é˜¶æ®µï¼ˆç­‰å¾… HTML ä¸‹è½½ï¼‰, 2 åªæœ‰ç©º root div çš„é˜¶æ®µï¼ˆç­‰å¾… JS ä¸‹è½½ï¼‰, 3 Loading çŠ¶æ€ï¼ˆJS æ‰§è¡Œåï¼Œç­‰å¾…æ•°æ®ï¼‰, 4 å®Œæ•´é¡µé¢ï¼ˆæ•°æ®è·å–å®Œæˆï¼‰ è¿™ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆ:&lt;/p&gt;</description>
      <content>&lt;h2 id=&#34;csr-client-side-rendering&#34;&gt;CSR (Client Side Rendering)&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;1. æµè§ˆå™¨è¯·æ±‚é¡µé¢
ç”¨æˆ·åœ¨æµè§ˆå™¨è¾“å…¥ URLï¼Œå‘å‰ç«¯æœåŠ¡å™¨(æ¯”å¦‚ Nginx)å‘èµ·è¯·æ±‚

2. æœåŠ¡å™¨è¿”å› HTML
Nginx è¿”å›ä¸€ä¸ªåŸºç¡€çš„ HTML æ–‡ä»¶ï¼ŒåŒ…å«ï¼š
- åŸºæœ¬çš„ HTML ç»“æ„
- ä¸€ä¸ªæ ¹èŠ‚ç‚¹ `&amp;lt;div id=&amp;#34;root&amp;#34;&amp;gt;&amp;lt;/div&amp;gt;`
- æ‰“åŒ…åçš„ JS æ–‡ä»¶å¼•ç”¨ï¼ˆåŒ…å«äº† React åº“ä»£ç ã€æ‚¨çš„åº”ç”¨ä»£ç ç­‰æ‰€æœ‰ JS ä»£ç ï¼‰

3. æµè§ˆå™¨ä¸‹è½½ JS
æµè§ˆå™¨è§£æ HTML æ—¶å‘ç° JS æ–‡ä»¶å¼•ç”¨ï¼Œä¼šä¸‹è½½è¿™äº›æ–‡ä»¶ï¼ŒåŒ…æ‹¬ï¼š
- React åº“ä»£ç 
- React DOM åº“ä»£ç 
- å…¶ä»–ä¾èµ–åº“ä»£ç 
- æ‚¨çš„åº”ç”¨ä»£ç 
ï¼ˆè¿™äº›åœ¨ç”Ÿäº§ç¯å¢ƒé€šå¸¸ä¼šè¢«æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼‰

4. æ‰§è¡Œ JS ä»£ç 
æµè§ˆå™¨æŒ‰é¡ºåºæ‰§è¡Œä¸‹è½½çš„ JS ä»£ç ï¼š
- å…ˆæ‰§è¡Œ React åº“ä»£ç ï¼Œä½¿æµè§ˆå™¨å…·å¤‡è¿è¡Œ React çš„èƒ½åŠ›
- ç„¶åæ‰§è¡Œæ‚¨çš„åº”ç”¨ä»£ç ï¼Œè¿™äº›ä»£ç ä¼šä½¿ç”¨ React API æ¥åˆ›å»ºå’Œæ¸²æŸ“ç»„ä»¶

5. React å¼€å§‹å·¥ä½œ
React ä»£ç æ‰§è¡Œåï¼š
- åˆ›å»ºè™šæ‹Ÿ DOM
- å°†ç»„ä»¶æ¸²æŸ“åˆ° `#root` èŠ‚ç‚¹ä¸­
- å¦‚æœç»„ä»¶ä¸­æœ‰æ•°æ®è¯·æ±‚ï¼Œä¼šå‘èµ· API è¯·æ±‚
- ç­‰å¾…æ•°æ®è¿”å›åæ›´æ–°ç»„ä»¶æ˜¾ç¤º

6. æœ€ç»ˆæ¸²æŸ“å®Œæˆ
- é¡µé¢å±•ç¤ºå®Œæ•´å†…å®¹
- ç”¨æˆ·å¯ä»¥ä¸é¡µé¢äº¤äº’
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·å¯èƒ½ä¼šç»å†ï¼š1 å®Œå…¨ç©ºç™½é˜¶æ®µï¼ˆç­‰å¾… HTML ä¸‹è½½ï¼‰, 2 åªæœ‰ç©º root div çš„é˜¶æ®µï¼ˆç­‰å¾… JS ä¸‹è½½ï¼‰, 3 Loading çŠ¶æ€ï¼ˆJS æ‰§è¡Œåï¼Œç­‰å¾…æ•°æ®ï¼‰, 4 å®Œæ•´é¡µé¢ï¼ˆæ•°æ®è·å–å®Œæˆï¼‰ è¿™ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆ:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœç”¨æˆ·ç¦ç”¨äº† JavaScript, ä½ çš„ React åº”ç”¨å°†å®Œå…¨æ— æ³•å·¥ä½œ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é¦–æ¬¡åŠ è½½ä¼šæœ‰ç™½å±æ—¶é—´(ç­‰å¾… JS ä¸‹è½½å’Œæ‰§è¡Œ)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SEOä¸å‹å¥½, æœç´¢å¼•æ“çˆ¬è™«å¯èƒ½æ— æ³•çœ‹åˆ°ä½ çš„å†…å®¹(å› ä¸ºå®ƒä»¬å¯èƒ½ä¸æ‰§è¡Œ JS)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯¹ä½ç«¯è®¾å¤‡ä¸å‹å¥½(ä¸‹è½½jsä»£ç , æ‰§è¡Œjs, åŠ è½½æ•°æ®,  æ¸²æŸ“é¡µé¢éƒ½åœ¨å®¢æˆ·ç«¯æ‰§è¡Œ)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„: Nginx æ˜¯ä¸ªé™æ€æ–‡ä»¶æœåŠ¡å™¨, ç±»ä¼¼ Apache, æˆ‘ä»¬ä½¿ç”¨ vite æ‰“åŒ… react é¡¹ç›®å, ä¼šç”Ÿæˆ index.html æ ¹ç›®å½•é™æ€æ–‡ä»¶å’Œå¯¹åº”çš„jsåŒ…,&lt;/p&gt;
&lt;p&gt;ä¸é™æ€æœåŠ¡å™¨å¯¹åº”çš„æ˜¯ äº‘æœåŠ¡/CDN, å¸¸è§çš„å¦‚ Vercel, GitHub Pages, é˜¿é‡Œäº‘ OSS&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;ssr-server-side-rendering&#34;&gt;SSR (Server Side Rendering)&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æµè§ˆå™¨è¯·æ±‚é¡µé¢
â†“
æœåŠ¡å™¨è¿è¡ŒReactä»£ç 
â†“
æœåŠ¡å™¨è·å–å¿…è¦æ•°æ®
â†“
æœåŠ¡å™¨ç”Ÿæˆå®Œæ•´HTML
â†“
æµè§ˆå™¨å±•ç¤ºå†…å®¹
â†“
JSåŠ è½½å®Œæˆåæ¥ç®¡é¡µé¢
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æœç´¢å¼•æ“çˆ¬è™«æ‹¿åˆ°çš„ç›´æ¥æ˜¯å®Œæ•´çš„ HTML å†…å®¹,æ— éœ€æ‰§è¡Œ JS, å¹¶ä¸” é¡µé¢å†…å®¹ã€å…ƒæ•°æ®ã€ç»“æ„éƒ½åœ¨é¦–æ¬¡å“åº”ä¸­,çˆ¬è™«å¯ç«‹å³è·å–,&lt;/p&gt;
&lt;p&gt;è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆè¯´SSRæ‹¥æœ‰æ›´å¿«çš„é¦–å±å±•ç¤º, æ›´å¥½çš„SEO, å¯¹ä½ç«¯è®¾å¤‡å‹å¥½, æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ, å½“ç„¶è¿™ä¹Ÿå¢åŠ äº†æœåŠ¡å™¨è´Ÿè½½, å¼€å‘é…ç½®æ›´å¤æ‚, æ¯•ç«Ÿä¸æ˜¯å‰åç«¯åˆ†ç¦»,&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¸¸è§çš„å¦‚ next.js (React çš„ä¸€ä¸ªæ¡†æ¶) é»˜è®¤å°±æ˜¯ SSR, å½“ç„¶ä½ å¯ä»¥ä½¿ç”¨ &lt;code&gt;use clien&lt;/code&gt; æ¥æŒ‡æ˜åœ¨å®¢æˆ·ç«¯æ‰§è¡Œ, æ‰€ä»¥ next.js æ˜¯ä¸ªæ··åˆçš„æ¨¡å¼,&lt;/p&gt;
&lt;p&gt;çº¯ React å¼€å‘å°±æ˜¯ CSR å’¯&lt;/p&gt;
&lt;/blockquote&gt;
</content>
    </item>
    
    <item>
      <title>Why Next.js Compared with Using React.js Directly</title>
      <link>https://blog.jiyi27.com/posts/frontend/next-js/002-why-next-js/</link>
      <pubDate>Sat, 07 Dec 2024 18:20:22 +0000</pubDate>
      
      <guid>https://blog.jiyi27.com/posts/frontend/next-js/002-why-next-js/</guid>
      <description>&lt;h2 id=&#34;can-i-use-react-without-a-framework&#34;&gt;&lt;strong&gt;Can I use React without a framework?&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;You can definitely use React without a frameworkâ€”thatâ€™s how youâ€™d &lt;a href=&#34;https://react.dev/learn/add-react-to-an-existing-project#using-react-for-a-part-of-your-existing-page&#34;&gt;use React for a part of your page.&lt;/a&gt; &lt;strong&gt;However, if youâ€™re building a new app or a site fully with React, we recommend using a framework.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Hereâ€™s why.&lt;/p&gt;
&lt;p&gt;Even if you donâ€™t need routing or data fetching at first, youâ€™ll likely want to add some libraries for them. As your JavaScript bundle grows with every new feature, you might have to figure out how to split code for every route individually. As your data fetching needs get more complex, you are likely to encounter server-client network waterfalls that make your app feel very slow. As your audience includes more users with poor network conditions and low-end devices, you might need to generate HTML from your components to display content earlyâ€”either on the server, or during the build time. Changing your setup to run some of your code on the server or during the build can be very tricky.&lt;/p&gt;</description>
      <content>&lt;h2 id=&#34;can-i-use-react-without-a-framework&#34;&gt;&lt;strong&gt;Can I use React without a framework?&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;You can definitely use React without a frameworkâ€”thatâ€™s how youâ€™d &lt;a href=&#34;https://react.dev/learn/add-react-to-an-existing-project#using-react-for-a-part-of-your-existing-page&#34;&gt;use React for a part of your page.&lt;/a&gt; &lt;strong&gt;However, if youâ€™re building a new app or a site fully with React, we recommend using a framework.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Hereâ€™s why.&lt;/p&gt;
&lt;p&gt;Even if you donâ€™t need routing or data fetching at first, youâ€™ll likely want to add some libraries for them. As your JavaScript bundle grows with every new feature, you might have to figure out how to split code for every route individually. As your data fetching needs get more complex, you are likely to encounter server-client network waterfalls that make your app feel very slow. As your audience includes more users with poor network conditions and low-end devices, you might need to generate HTML from your components to display content earlyâ€”either on the server, or during the build time. Changing your setup to run some of your code on the server or during the build can be very tricky.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;As your JavaScript bundle grows with every new feature, you might have to figure out how to &lt;strong&gt;split code for every route individually&lt;/strong&gt;.
React &lt;strong&gt;é»˜è®¤æƒ…å†µ&lt;/strong&gt;ä¸åšä»£ç åˆ†å‰²,&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// App.jsx
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;HomePage&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;from&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;./pages/Home&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AboutPage&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;from&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;./pages/About&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ProductPage&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;from&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;./pages/Product&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// æ‰“åŒ…æ—¶è¿™äº›importä¼šè¢«åˆå¹¶åˆ°ä¸€ä¸ªå¤§çš„bundle.jsä¸­
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ç”¨æˆ·è®¿é—®ä»»ä½•é¡µé¢,éƒ½ä¼šåŠ è½½æ•´ä¸ªbundle.js
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;App&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Routes&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Route&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;path&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;element&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;HomePage&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;} &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Route&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;path&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/about&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;element&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;AboutPage&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;} &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Route&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;path&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/product&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;element&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ProductPage&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;} &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;/Routes&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;ä½¿ç”¨ä»£ç åˆ†å‰²å&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ä½¿ç”¨åŠ¨æ€import
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;HomePage&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;lazy&lt;/span&gt;(() =&amp;gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;import&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;./pages/Home&amp;#39;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ProfilePage&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;lazy&lt;/span&gt;(() =&amp;gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;import&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;./pages/Profile&amp;#39;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SettingsPage&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;lazy&lt;/span&gt;(() =&amp;gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;import&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;./pages/Settings&amp;#39;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ç°åœ¨webpack/viteç­‰æ„å»ºå·¥å…·ä¼š:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// 1. æŠŠæ¯ä¸ªé¡µé¢çš„ä»£ç åˆ†åˆ«æ‰“åŒ…æˆå•ç‹¬çš„chunkæ–‡ä»¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// 2. åªåœ¨éœ€è¦æ—¶æ‰åŠ è½½å¯¹åº”çš„chunk
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;As your data fetching needs get more complex, you are likely to encounter &lt;strong&gt;server-client network waterfalls&lt;/strong&gt; that make your app feel very slow.&lt;/p&gt;
&lt;p&gt;ä¼ ç»Ÿçš„ç€‘å¸ƒå¼è·å–æ–¹å¼:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ç€‘å¸ƒå¼è¯·æ±‚ - è¾ƒæ…¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;loadProductPage&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// ç¬¬1æ­¥: è·å–å•†å“ä¿¡æ¯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;product&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;fetchProduct&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;productId&lt;/span&gt;);  &lt;span style=&#34;color:#75715e&#34;&gt;// ç­‰å¾…1ç§’
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// ç¬¬2æ­¥: å¿…é¡»ç­‰å•†å“ä¿¡æ¯è¿”å›åæ‰èƒ½è·å–å–å®¶ä¿¡æ¯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seller&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;fetchSeller&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;product&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;sellerId&lt;/span&gt;);  &lt;span style=&#34;color:#75715e&#34;&gt;// å†ç­‰1ç§’
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// ç¬¬3æ­¥: å¿…é¡»ç­‰å–å®¶ä¿¡æ¯è¿”å›åæ‰èƒ½è·å–å…¶ä»–å•†å“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;otherProducts&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;fetchSellerProducts&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;seller&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;);  &lt;span style=&#34;color:#75715e&#34;&gt;// å†ç­‰1ç§’
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// ç¬¬4æ­¥: æœ€åè·å–è¯„ä»·
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;reviews&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;fetchReviews&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;otherProducts&lt;/span&gt;);  &lt;span style=&#34;color:#75715e&#34;&gt;// å†ç­‰1ç§’
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// æ€»å…±éœ€è¦ç­‰å¾… 4 ç§’
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¹¶è¡Œè·å–æ–¹å¼:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å¹¶è¡Œè¯·æ±‚ - å¯èƒ½æ›´å¿«
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;loadProductPage&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;// åŒæ—¶å‘èµ·å¤šä¸ªè¯·æ±‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; [&lt;span style=&#34;color:#a6e22e&#34;&gt;product&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;seller&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;otherProducts&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;reviews&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; Promise.&lt;span style=&#34;color:#a6e22e&#34;&gt;all&lt;/span&gt;([
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#a6e22e&#34;&gt;fetchProduct&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;productId&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#a6e22e&#34;&gt;fetchSeller&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;sellerId&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#a6e22e&#34;&gt;fetchSellerProducts&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;sellerId&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#a6e22e&#34;&gt;fetchReviews&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;productId&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt; ]);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// æ€»å…±åªéœ€è¦ç­‰å¾… 1 ç§’
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸ºä»€ä¹ˆè¯´å¯èƒ½æ›´å¿«å‘¢?&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ Promise.all å¹¶è¡Œè¯·æ±‚,å¦‚æœå…¶ä¸­ä¸€ä¸ªè¯·æ±‚ç‰¹åˆ«æ…¢,ä¹Ÿä¼šé˜»å¡æ•´ä¸ªé¡µé¢çš„æ¸²æŸ“, æ¯”å¦‚å…¶ä»–éƒ½å¾ˆå¿«, å…¶ä¸­ä¸€ä¸ªè¯·æ±‚è€—è´¹10s, é‚£å°±è¦ç­‰å¾…10s&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;As your audience includes more users with poor network conditions and low-end devices, &lt;strong&gt;you might need to generate HTML from your components to display content early&lt;/strong&gt;â€”either on the server, or during the build time.&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯åœ¨è¯´æœ‰æ—¶å€™ä½ åº”è¯¥ä½¿ç”¨ SSR è€Œä¸æ˜¯ CSR, å¯å‚è€ƒ frontend/next-js/003-ssr-csr.md&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;These problems are not React-specific. This is why Svelte has SvelteKit, Vue has Nuxt, and so on.&lt;/strong&gt; To solve these problems on your own, youâ€™ll need to integrate your bundler with your router and with your data fetching library. Itâ€™s not hard to get an initial setup working, but there are a lot of subtleties involved in making an app that loads quickly even as it grows over time. Youâ€™ll want to send down the minimal amount of app code but do so in a single clientâ€“server roundtrip, in parallel with any data required for the page. Youâ€™ll likely want the page to be interactive before your JavaScript code even runs, to support progressive enhancement. You may want to generate a folder of fully static HTML files for your marketing pages that can be hosted anywhere and still work with JavaScript disabled. Building these capabilities yourself takes real work.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸ç”¨ Next.jsï¼šç”¨æˆ·è®¿é—®æ—¶éœ€è¦å…ˆä¸‹è½½æ•´ä¸ª React åº”ç”¨ï¼Œç„¶åç­‰ JavaScript è¿è¡Œï¼Œå†è¯·æ±‚æ–°é—»æ•°æ®ï¼Œæœ€åæ‰èƒ½çœ‹åˆ°å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨ Next.jsï¼šæœåŠ¡å™¨ç›´æ¥è¿”å›å·²ç»åŒ…å«æ–°é—»å†…å®¹çš„ HTMLï¼Œç”¨æˆ·ç«‹å³å°±èƒ½çœ‹åˆ°å†…å®¹ï¼Œä½“éªŒæ›´å¥½ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Vite + React éœ€è¦æ‰‹åŠ¨é…ç½®è·¯ç”±
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;import&lt;/span&gt; { &lt;span style=&#34;color:#a6e22e&#34;&gt;Routes&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;Route&lt;/span&gt; } &lt;span style=&#34;color:#a6e22e&#34;&gt;from&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;react-router-dom&amp;#39;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;App&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Routes&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Route&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;path&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/about&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;element&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;About&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;} &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Route&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;path&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/posts/:id&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;element&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;{&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Post&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;} &lt;span style=&#34;color:#f92672&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;/Routes&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Next.js è‡ªåŠ¨æ ¹æ®æ–‡ä»¶ç»“æ„ç”Ÿæˆè·¯ç”±
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// pages/about.tsx -&amp;gt; /about
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// app/posts/[id]/page.tsx
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// app/about/page.tsx
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;About&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;div&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;About&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Page&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;/div&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// app/posts/[id]/page.tsx
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Post&lt;/span&gt;({ &lt;span style=&#34;color:#a6e22e&#34;&gt;params&lt;/span&gt; }&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; { &lt;span style=&#34;color:#a6e22e&#34;&gt;params&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; { &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;string&lt;/span&gt; } }) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;div&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Post&lt;/span&gt; {&lt;span style=&#34;color:#a6e22e&#34;&gt;params&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;}&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;/div&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;React frameworks on this page solve problems like these by default, with no extra work from your side.&lt;/strong&gt; They let you start very lean and then scale your app with your needs. Each React framework has a community, so finding answers to questions and upgrading tooling is easier. Frameworks also give structure to your code, helping you and others retain context and skills between different projects. Conversely, with a custom setup itâ€™s easier to get stuck on unsupported dependency versions, and youâ€™ll essentially end up creating your own frameworkâ€”albeit one with no community or upgrade path (and if itâ€™s anything like the ones weâ€™ve made in the past, more haphazardly designed).&lt;/p&gt;
&lt;p&gt;If your app has unusual constraints not served well by these frameworks, or you prefer to solve these problems yourself, you can roll your own custom setup with React. Grab &lt;code&gt;react&lt;/code&gt; and &lt;code&gt;react-dom&lt;/code&gt; from npm, set up your custom build process with a bundler like &lt;a href=&#34;https://vitejs.dev/&#34;&gt;Vite&lt;/a&gt; or &lt;a href=&#34;https://parceljs.org/&#34;&gt;Parcel&lt;/a&gt;, and add other tools as you need them for routing, static generation or server-side rendering, and more.&lt;/p&gt;
&lt;p&gt;References:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://react.dev/learn/start-a-new-react-project#can-i-use-react-without-a-framework&#34;&gt;https://react.dev/learn/start-a-new-react-project#can-i-use-react-without-a-framework&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.reddit.com/r/nextjs/comments/17qbx9s/advice_on_choosing_nextjs_instead_of_plain_react/&#34;&gt;https://www.reddit.com/r/nextjs/comments/17qbx9s/advice_on_choosing_nextjs_instead_of_plain_react/&lt;/a&gt;&lt;/p&gt;
</content>
    </item>
    
  </channel>
</rss>
