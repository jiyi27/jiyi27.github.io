---
title: "Hugo With MemE"
date: 2023-04-19T23:31:57-03:00
tags:
  - Hugo
  - MemE
---

1. 介绍备份博客的思路
2. 介绍如何使用并微改MemE主题

<!-- more -->

## 1. 图片插入

想说Hulo插入图片真的很简单, 只需要在博客根目录创建个与博客同名的文件夹即可

图片所在的位置:

```
├── static
│   └── posts
│       └── hello-world
│           └── violet.png
```

博客所在的位置:

```
├── content
│   ├── about
│   │   └── _index.md
│   └── posts
│       └── hello-world.md
```

`hello-world.md`的内容:

```
---
title: "Hello World"
date: 2023-04-19T01:27:18-03:00
draft: true
---

Hello, world...

![](violet.png)
```

参考:

- [Adding images in Hugo | blog](https://parzival2.github.io/blog/posts/add-images-hugo/)

----

## 2. 归档页面

如果你有多个文章分区，你可能就需要一个归档页面，怎么配置呢？

首先，在站点的 `content` 文件夹下新建一个名为 `archives` 的文件夹，并在该文件夹下新建一个 `_index.md` 文件，里面加上：

```t
+++
title = "Archives"
+++
```

然后，添加一个入口，比如在菜单栏中，往 `config.toml` 中加入：

```toml
[[menu.main]]
    url = "/archives/"
    name = "Archives"
    weight = 2
    pre = "internal"
    post = "archive"
```

其中，`weight` 可自行修改一下。

---

## 3. 文章分类

首先，在站点的 `content` 文件夹下新建一个名为 `tags` 的文件夹，并在该文件夹下新建一个 `_index.md` 文件，里面加上：

```
+++
title = "Tags"
+++
```

然后，修改tag入口，修改 `config.toml` 如下：

```toml
[[menu.main]]
        pageref = "/tags/"
        name = "Tags"
        weight = 4
        pre = "internal"
        post = "tags"
```

到此我们就设置好了博客的header页面,  `config.toml`内容如下:

```toml
[menu]
    ## Menu bar
    [[menu.main]]
        pageref = "/tags/"
        name = "Tags"
        weight = 4
        pre = "internal"
        post = "tags"
    [[menu.main]]
        weight = 6
        identifier = "theme-switcher"
    [[menu.main]]
        weight = 7
        identifier = "lang-switcher"
    [[menu.main]]
        weight = 8
        identifier = "search"
        post = "search"
    [[menu.main]]
        url = "/archives/"
        name = "Archives"
        weight = 2
        pre = "internal"
        post = "archive"
```

---

## 4. 设置主页Footer

主要修改根目录下的配置文件`config.toml`, 仔细查看, 里面有很多注释, 很多都是直接修改true和false就行了, 

比如下面这段, 

```toml
######################################
    # 全局Footer
    enableFooter = true
    # 使能后文章下有footer
    displayFooter = false
    # 主页footer
    displayFooterInHome = true

    displayCopyleftSymbol = false
    displayCopyrightSymbol = true
    displaySiteCreatedYear = true

    # Leave it empty("") if you don’t want
    # the icon
    iconBetweenYearAndAuthor = "heart"
    iconColor = "#f06292"
    # Enable heartbeat animation?
    # iconAnimation = true

    # Socials
    enableSocials = true
    # Note: see data/Socials.toml
```

看最后说的see data/Socials.toml, 其实就是文件夹`blog/themes/meme/data`下存放了`data/Socials.toml`在这修改footer里的链接, 如果GitHub, Twitter等... 其实主题MemE下的目录就是`blog/themes/meme/da ta`, 里面的`SVG.toml`和`Socials.toml`都是相关自定义, 其中`SVG.toml`是用来放icon的, 

----

## 5. 在footer设置猫猫jiojio图标

打开`blog/themes/meme/data/SVG.toml`查看内容, 如下

```toml
# Please do NOT edit this file!
#
# This file stores all SVG images used by MemE.
#
# If you want to customize or add an icon, please create
# a new `SVG.toml` file in your site `data` directory.
#
# Note that you really don’t need to copy the entire file
# for customization. In Hugo, data files can be
# overwritten by *key*!
#
# Also, please be sure to add `class` attribute into the SVG.
# The value, `brand` for brand; `icon` for icons, i.e.
#   `<svg ... class="brand">`
#   `<svg ... class="icon">`
```

于是在`blog/data/`下创建文件`SVG.toml`, 然后去[Font Awesome](https://fontawesome.com/)找到自己喜欢的图标, 复制其svg链接, 放到`SVG.toml`中, 并赋予其名字(创建变量), 如我的这个就是创建变量`paw`, 然后别忘了给svg添加class值设置为`icon` , 格式如下: 

```json
paw = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon"><!--! Font Awesome Pro 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M226.5 92.9c14.3 42.9-.3 86.2-32.6 96.8s-70.1-15.6-84.4-58.5s.3-86.2 32.6-96.8s70.1 15.6 84.4 58.5zM100.4 198.6c18.9 32.4 14.3 70.1-10.2 84.1s-59.7-.9-78.5-33.3S-2.7 179.3 21.8 165.3s59.7 .9 78.5 33.3zM69.2 401.2C121.6 259.9 214.7 224 256 224s134.4 35.9 186.8 177.2c3.6 9.7 5.2 20.1 5.2 30.5v1.6c0 25.8-20.9 46.7-46.7 46.7c-11.5 0-22.9-1.4-34-4.2l-88-22c-15.3-3.8-31.3-3.8-46.6 0l-88 22c-11.1 2.8-22.5 4.2-34 4.2C84.9 480 64 459.1 64 433.3v-1.6c0-10.4 1.6-20.8 5.2-30.5zM421.8 282.7c-24.5-14-29.1-51.7-10.2-84.1s54-47.3 78.5-33.3s29.1 51.7 10.2 84.1s-54 47.3-78.5 33.3zM310.1 189.7c-32.3-10.6-46.9-53.9-32.6-96.8s52.1-69.1 84.4-58.5s46.9 53.9 32.6 96.8s-52.1 69.1-84.4 58.5z"/></svg>'
```

然后设置根目录下的配置文件, 把爱心💗icon改为`paw`, 

```toml
# Leave it empty("") if you don’t want
# the icon
iconBetweenYearAndAuthor = "paw"
# iconColor = "#f06292"
# Enable heartbeat animation?
# iconAnimation = true
```

---

## 6. 取消博客尾部的各种分享图标

编辑根目录下的配置文件`config.toml`, 找到这个选项, 设置成false

```
######################################
    # Post Share
    enablePostShare = false
```

---

## 7. 其他设置

下面都是编辑根目录下的配置文件`config.toml`

### 7.1. 设置博客内容宽度

```toml
# The content width of the post
    postWidth = 50
    # Note: you can leave it empty("") to
    #       fallback to the default value: 42
    #       Unit: em
```

### 7.2. 设置代码高亮颜色

因为它的默认注释是蓝色, 很丑,  找到`/blog/themes/meme/assets/scss/themes/_light.scss` 修改对应部分内容如下:

```
    @if ($enableHighlight) {
        /* https://xyproto.github.io/splash/docs/all.html */
        /* Color values matching manni style */

        --chroma-line-numbers-background: #ffffcc;
        --chroma-line-numbers-color: #7f7f7f;
        --chroma-keyword-color: #006699;
        --chroma-name-color: #9999ff;
        --chroma-attribute-color: #330099;
        --chroma-literal-color: #cc3300;
        --chroma-number-color: #009999;
        --chroma-comment-color: #999988;
        --chroma-deleted-color: #ffcccc;
        --chroma-output-color: #aaaaaa;
    }
```

如果你不喜欢 MemE 默认的代码高亮的样式，可以前往[这个列表](https://xyproto.github.io/splash/docs/longer/all.html)找一个你喜欢的，比如 `monokai`，然后：

```sh
hugo gen chromastyles --style=monokai
```

将输出与 [`_highlight.scss`](https://github.com/reuixiy/hugo-theme-meme/blob/master/assets/scss/components/_highlight.scss) 中的相关代码对比，找出相关颜色值，然后[定制](https://io-oi.me/tech/documentation-of-hugo-theme-meme/#定制)一下 [`assets/scss/themes/`](https://github.com/reuixiy/hugo-theme-meme/tree/master/assets/scss/themes) 中的相应文件内的相应代码即可。

### 7.3. 取消文章第一个字变大

```toml
######################################
    ## Drop Cap
    enableDropCap = false
```

### 7.4. 开启极简页脚

```toml
######################################
    # Post Tags
    enablePostTags = false
    postTagsIcon = "tag"
 
 ######################################
    # Minimal Footer

    enableMinimalFooter = true
    enableVerticalBarStructure = false
    # Note: If you enable this, the
    #       categories or sections that
    #       displayed on the right will
    #       include all top-level
    #       categories or sections and are
    #       separated by vertical bar(|).
    enableAboutPageMinimalFooter = true
```

### 7.5. 取消文章标题所有字母大写

```
## Small Caps
    enableSmallCaps = false
    # Note: apply to headings & post toc
    #       title only
    #       *global settings*
    #       `smallCaps` in post’s Front Matter
    #       has a higher priority than here
```



----

## 8. 关于Hexo和Hugo

在 Hugo 中，与 `hexo s` 命令等同的是 `hugo server`，但由于默认的[文章模板](https://gohugo.io/content-management/archetypes/)里面有 `draft: true`，故需加上 `-D` 参数以渲染草稿；与 `hexo g` 命令等同的是 `hugo`，用来生成 `public` 文件夹；与 `hexo clean` 类似的命令是 `hugo --gc --cleanDestinationDir`；在 Hugo 中可以直接使用 `hugo --minify` 压缩 HTML、JS、CSS 等文件；在 Hugo 中，没有 `hexo d` [一键部署](https://hexo.io/zh-cn/docs/one-command-deployment) `public` 文件夹到 GitHub 的操作，你需要自己[新建脚本](https://gohugo.io/hosting-and-deployment/hosting-on-github/)，但我建议使用 Git 管理整个站点，然后上传整个站点到 GitHub 以通过[持续集成](https://io-oi.me/tech/host-your-blog-on-ipfs/)的方式部署，而非用 Git 直接部署 `public` 生产版代码，因为这其实是非常可笑的——Git 是用来管理源码的。此外，关于 `hugo` 命令的更多参数，请见 [Commands](https://gohugo.io/commands/)。

最后，Hugo 默认是渲染到内存的，如果你有一些特殊情况要调试，比如 [Service Worker](https://io-oi.me/tech/pwa-via-workbox/)，那么你可以通过使用 `--renderToDisk` 参数渲染到硬盘来实现调试。此外，如果你有一个厚重的 `static` 文件夹（比如有大量图片或视频），那么也可以使用该参数以渲染到硬盘。不然，Hugo 可能会吃光你的电脑内存🤪。

参考:

- [Hugo 与 Hexo 的异同 | reuixiy](https://io-oi.me/tech/hugo-vs-hexo/)

---

## 9. 创建新网站

```shell
hugo new site blog
```

然后用我的`themes`文件和博客根目录下的`config.toml`直接替换新的博客文件夹里的这两个文件, 

```shell
hugo new "posts/hello-world.md"

hugo server -D
```

这两个文件在`backup`分支[shwezhu/shwezhu.github.io](https://github.com/shwezhu/shwezhu.github.io)

---

## 10. 备份

### 10.1. 备份博客内容

在博客根目录下添加`.gitignore`文件,  内容如下:

```sh
.DS_Store
.hugo_build.lock
.gitmodules

node_modules/
public/
assets/
layouts/
resources/
data/
archetypes/
```

删除根目录的`.git` 并重新初始化git, **注意每次修改博客要在backup分支下修改, 一定要在backup分支下进行commit**, 

```shell
cd blog/
git init
git switch -c backup

git add .
git commit -m "$(date)"
git remote add origin git@github.com:shwezhu/shwezhu.github.io.git
git push origin backup
```

### 10.2. 部署静态网页到GitHub Pages

进入到`public`文件夹, 

```shell
git init 
# 添加你向忽略的文件
touch .gitignore

git add .
git commit -m "init website"
git remote add origin git@github.com:shwezhu/shwezhu.github.io.git

git push origin main
```

然后在GitHub设置里, 设置github page, 默认分支是main, 而不是backup, 这样才能正确部署网站, 

写了简单script, 一键备份, 省事了(给sh文件添加可执行权限`chmod u+x deploy.sh`):

`deploy.sh`:

```shell
./scripts/backup.sh
./scripts/render.sh
```

`backup.sh`:

```shell
#!/bin/bash
git switch backup
git add .
git commit -m "$(date)"
git push origin backup
```

`render.sh`:

```shell
#!/bin/bash
hugo
cd `dirname $0`/../public

git add .
git commit -m "$(date)"
git push origin main
```

