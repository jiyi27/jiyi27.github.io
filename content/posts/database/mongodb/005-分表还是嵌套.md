---
title: MongoDB 分表还是嵌套
date: 2025-04-21 20:39:18
categories:
 - 数据库
tags:
 - 数据库
 - mongodb
---

这两天工作遇到一些问题, 需要判断是否需要分表, 目前采用的存储方式是嵌套, 举个例子吧: 商家 - 商品 - 评论

我们现在要展示 热门评价, 评价属于某个商品, 商品属于某个店铺, 展示评论的时候 要展示 评论内容 商品名 店铺名, 假设我们采用两种结构:

- 嵌套 每个店铺都有一个商品 list 字段, 每个商品都有一个 评论 list 字段,

- 分表存储









请分析这两种存方式, MongoDB 的 $lookup 适合哪一个场景, 并给出理由,