---
title: Vue 数据可视化 ECharts
date: 2025-04-19 21:40:20
categories:
 - 前端开发
tags:
 - 前端开发
 - vue
---

## 1. Element Plus 组件

### 1.1. 总览

![](https://pub-2a6758f3b2d64ef5bb71ba1601101d35.r2.dev/blogs/2025/04/68bc1ea984225662de45824c2f6af1a3.jpg)

```vue
  <!-- 物料概览卡片 -->
  <el-card class="dashboard-card" shadow="hover">
    <template #header>
      <div class="card-header">
        <span>物料概览</span>
        <el-button text @click="navigateToDetail('materials')"
          >查看详情</el-button
        >
      </div>
    </template>
    <div class="card-content">
      <div class="metric-item">
        <span class="metric-label">物料总数</span>
        <span class="metric-value">{{ materialsStats.TotalCount }}</span>
      </div>
      <div class="metric-chart">
        <el-progress
          type="dashboard"
          :percentage="materialsStats.OverdueRate"
          :color="overdueRateColor"
          :stroke-width="8"
        >
          <template #default="{ percentage }">
            <div class="progress-label">
              <div>逾期率</div>
              <span>{{ percentage.toFixed(1) }}%</span>
            </div>
          </template>
        </el-progress>
        <el-progress
          type="dashboard"
          :percentage="materialsStats.EarlyCompletionRate"
          :color="earlyCompletionColor"
          :stroke-width="8"
        >
          <template #default="{ percentage }">
            <div class="progress-label">
              <div>提前完成率</div>
              <span>{{ percentage.toFixed(1) }}%</span>
            </div>
          </template>
        </el-progress>
      </div>
    </div>
  </el-card>
```

这段代码基于 **Element Plus**（Vue.js 的 UI 组件库）实现了一个物料概览卡片, 包含 `el-card`、`el-progress`、`el-button` 和 `template` 等组件, 这个组件并不是使用 `echarts` 实现的, 而是基于 Element Plus:

- **卡片容器**：使用 `el-card` 提供统一的布局，包含标题和内容区域

- **标题区域**：展示“物料概览”标题和“查看详情”按钮（`el-button`）

- **内容区域**：展示物料总数和两个圆形进度条（`el-progress`），分别表示“逾期率”和“提前完成率”

- **动态数据**：通过 Vue 的数据绑定（如 `materialsStats`）动态展示数值和进度

这些组件通过 Vue 的模板语法（template）组织，共同形成一个结构清晰、功能完整的卡片

```
el-card (父组件)
├── template #header (插槽，定义头部)
│   ├── div.card-header
│   │   ├── span (标题“物料概览”)
│   │   └── el-button (子组件，“查看详情”按钮)
├── div.card-content
│   ├── div.metric-item
│   │   ├── span.metric-label (“物料总数”)
│   │   └── span.metric-value (显示 materialsStats.TotalCount)
│   └── div.metric-chart
│       ├── el-progress (子组件，逾期率进度条)
│       │   └── template #default (插槽，自定义进度条内容)
│       │       └── div.progress-label
│       │           ├── div (“逾期率”)
│       │           └── span (显示 percentage.toFixed(1) + %)
│       └── el-progress (子组件，提前完成率进度条)
│           └── template #default (插槽，自定义进度条内容)
│               └── div.progress-label
│                   ├── div (“提前完成率”)
│                   └── span (显示 percentage.toFixed(1) + %)
```

## 1.2. `<template>` 是什么

**定义**：`template` 是 Vue.js 的模板语法，用于定义组件的 HTML 结构或插槽内容。它本身不渲染为实际的 DOM 元素，仅作为占位符组织内容

**作用**：`template` 是 Vue 的模板语法，用于定义插槽内容，**连接父组件和子组件**

**联系**：

- 在 `el-card` 中，`<template #header>` 定义头部，包含 `el-button` 和标题
- 在 `el-progress` 中，`<template #default>` 定义进度条的自定义内容，显示文字和百分比

**配合方式**：

- `template` 作为桥梁，将静态内容（文字）、动态数据（`percentage`）和子组件（`el-button`、`el-progress`）组织起来，确保结构清晰

> Vue 组件（如 `el-card`、`el-progress`）通常支持插槽（`slots`），允许开发者自定义特定区域的内容
>
> **`el-card` 的插槽结构**
>
> - **header 插槽**（#header）：用于自定义卡片的头部区域，通常包含标题或操作按钮
>
> - **默认插槽**（#default）：用于自定义卡片的内容区域，通常包含卡片的主要内容
> - 如果不写 `<template>`，直接写入内容，会填充组件的**默认插槽**（`#default`）

## 2. ECharts

### 2.1. ECharts 的组成结构（总体思路）

ECharts 是通过一个大的 `option` 配置对象来控制图表外观和行为的, 这个对象大致可以分为：

```js
ECharts Option
├── title              // 标题
├── tooltip            // 提示框
├── legend             // 图例
├── grid               // 网格布局
├── xAxis / yAxis      // 坐标轴
├── series             // 数据序列（图表的主要部分，如折线、柱状等）
├── dataZoom           // 数据缩放
└── ...（还有更多其他组件）
```

### 2.2. 各部分配置详解

```js
option
├── title: {
│   └── text: '图表标题'
├── tooltip: {
│   └── trigger: 'axis' // 悬浮提示，常用 'item' 或 'axis'
├── legend: {
│   └── data: ['系列1', '系列2'] // 对应 series 的 name
├── grid: {
│   └── left/right/top/bottom: '10%' // 控制图表绘图区位置
├── xAxis: {
│   └── type: 'category', data: ['1月', '2月', '3月']
├── yAxis: {
│   └── type: 'value'
├── series: [
│   ├── {
│   │   name: '系列1',
│   │   type: 'bar' 或 'line',
│   │   data: [10, 20, 30]
│   └── }
├── dataZoom: [
│   └── { type: 'slider', start: 0, end: 100 } // 缩放
```

### 2.3. 数据控制中心 `series`

ECharts 里 `series` 是用来描述“这个图要画什么数据”，它是一个数组，每一个对象代表一组数据（折线、柱状、饼图都一样）

```js
series: [
  {
    name: '销售额',       // 对应 legend 的文字，也用于 tooltip 显示
    type: 'bar',         // 图表类型：bar（柱状图）/ line（折线图）
    data: [500, 700, 1000, 800, 1200]  // 👈 真正的图表数据，Y 轴值
  },
  {
    name: '利润',
    type: 'line',
    data: [200, 300, 400, 350, 500]
  }
]
```

```
xAxis.data （X 轴坐标）
  ↓        对应
series[n].data （Y 轴数据）
```

你只要改 `series[n].data` 里的数组，就可以改变图上的值