<!DOCTYPE html>
<html lang="en">
<head>
  
    
    <title>npm vs npx vs pnpm :: 为霜的博客</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="$ npx create-next-app@latest learn-by-example --use-pnpm ✔ Would you like to use TypeScript? … No / Yes ✔ Would you like to use ESLint? … No / Yes ✔ Would you like to use Tailwind CSS? … No / Yes ✔ Would you like your code inside a `src/` directory? … No / Yes ✔ Would you like to use App Router? (recommended) … No / Yes ✔ Would you like to use Turbopack for `next dev`? … No / Yes ✔ Would you like to customize the import alias (`@/*` by default)? … No / Yes $ pnpm add date-fns lucide-react $ pnpm dlx shadcn@latest init $ pnpm dlx shadcn@latest add textarea npm vs npx vs pnmp # download and install Node.js # https://nodejs.org/en/download/package-manager brew install node@22 node -v # should print `v22.12.0` npm -v # should print `10.9.0` # install pnpm # https://pnpm.io/installation curl -fsSL https://get.pnpm.io/install.sh | sh - npm comes with Node.js, and npx comes with npm. In order to use npm or npx, you need install node.js.
" />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://blog.jiyi27.com/posts/frontend/next-js/001-npm-npx-pnpm/" />





  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/categories.min.3202f75cbb294747099af3850a68a09ee94b3ce505fc39e134692d90ff0a9b2a.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/code.min.dd73d157e77e82a3dc1cb06ba424cf6cc6811af0bb604ad6c68e70faf2439c8a.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/fonts.min.4881f0c525f3ce2a1864fb6e96676396cebe1e6fcef1933e8e1dde7041004fb5.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/main.min.3fb8954e26342ad3afabb4525959bfec6f9fc0d6929f0dda738ddeee30211690.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/menu.min.8cee75f73b9f9b1e40bd0dd53e6e770156b08bbfe1c579cd256c3f6cd3b6d32b.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/post.min.014a50745fbdd41d5f420a3e288730d5af4b7d90344dc6211d0e50c368b5b303.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/prism.min.b958d3d7c6c67361b945f9062d07d403422604b3d2cd33f93b88d41ed0ba634d.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/term.min.94de320c1b850e126e6d2c88a7c90acf58bb1313f0ea14a14cda2a42f2a88db2.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">


<link rel="stylesheet" href="https://blog.jiyi27.com/terminal.css">




<link rel="shortcut icon" href="https://blog.jiyi27.com/favicon.png">
<link rel="apple-touch-icon" href="https://blog.jiyi27.com/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="npm vs npx vs pnpm">
<meta property="og:description" content="$ npx create-next-app@latest learn-by-example --use-pnpm ✔ Would you like to use TypeScript? … No / Yes ✔ Would you like to use ESLint? … No / Yes ✔ Would you like to use Tailwind CSS? … No / Yes ✔ Would you like your code inside a `src/` directory? … No / Yes ✔ Would you like to use App Router? (recommended) … No / Yes ✔ Would you like to use Turbopack for `next dev`? … No / Yes ✔ Would you like to customize the import alias (`@/*` by default)? … No / Yes $ pnpm add date-fns lucide-react $ pnpm dlx shadcn@latest init $ pnpm dlx shadcn@latest add textarea npm vs npx vs pnmp # download and install Node.js # https://nodejs.org/en/download/package-manager brew install node@22 node -v # should print `v22.12.0` npm -v # should print `10.9.0` # install pnpm # https://pnpm.io/installation curl -fsSL https://get.pnpm.io/install.sh | sh - npm comes with Node.js, and npx comes with npm. In order to use npm or npx, you need install node.js.
" />
<meta property="og:url" content="https://blog.jiyi27.com/posts/frontend/next-js/001-npm-npx-pnpm/" />
<meta property="og:site_name" content="为霜的博客" />

  <meta property="og:image" content="https://blog.jiyi27.com/og-image.png">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">

  <meta property="article:section" content="前端开发" />


  <meta property="article:published_time" content="2024-12-08 15:20:22 &#43;0000 UTC" />












</head>
<body>


<div class="container center">

  
  
  

  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://blog.jiyi27.com/posts/frontend/next-js/001-npm-npx-pnpm/">npm vs npx vs pnpm</a>
  </h1>
  <div class="post-meta"><time class="post-date">2024-12-08</time><span class="post-reading-time">3 分钟阅读 (585 字数)</span></div>

  
    <span class="post-tags">
      
      #<a href="https://blog.jiyi27.com/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">前端开发</a>&nbsp;
      
      #<a href="https://blog.jiyi27.com/tags/next.js/">next.js</a>&nbsp;
      
      #<a href="https://blog.jiyi27.com/tags/npm/">npm</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ npx create-next-app@latest learn-by-example --use-pnpm
</span></span><span style="display:flex;"><span>✔ Would you like to use TypeScript? … No / Yes
</span></span><span style="display:flex;"><span>✔ Would you like to use ESLint? … No / Yes
</span></span><span style="display:flex;"><span>✔ Would you like to use Tailwind CSS? … No / Yes
</span></span><span style="display:flex;"><span>✔ Would you like your code inside a <span style="color:#e6db74">`</span>src/<span style="color:#e6db74">`</span> directory? … No / Yes
</span></span><span style="display:flex;"><span>✔ Would you like to use App Router? <span style="color:#f92672">(</span>recommended<span style="color:#f92672">)</span> … No / Yes
</span></span><span style="display:flex;"><span>✔ Would you like to use Turbopack <span style="color:#66d9ef">for</span> <span style="color:#e6db74">`</span>next dev<span style="color:#e6db74">`</span>? … No / Yes
</span></span><span style="display:flex;"><span>✔ Would you like to customize the import alias <span style="color:#f92672">(</span><span style="color:#e6db74">`</span>@/*<span style="color:#e6db74">`</span> by default<span style="color:#f92672">)</span>? … No / Yes
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ pnpm add date-fns lucide-react
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>$ pnpm dlx shadcn@latest init
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ pnpm dlx shadcn@latest add textarea
</span></span></code></pre></div><h2 id="npm-vs-npx-vs-pnmp">npm vs npx vs pnmp<a href="#npm-vs-npx-vs-pnmp" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># download and install Node.js</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># https://nodejs.org/en/download/package-manager</span>
</span></span><span style="display:flex;"><span>brew install node@22
</span></span><span style="display:flex;"><span>node -v <span style="color:#75715e"># should print `v22.12.0`</span>
</span></span><span style="display:flex;"><span>npm -v <span style="color:#75715e"># should print `10.9.0`</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># install pnpm</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># https://pnpm.io/installation</span>
</span></span><span style="display:flex;"><span>curl -fsSL https://get.pnpm.io/install.sh | sh -
</span></span></code></pre></div><p><code>npm</code> comes with <code>Node.js</code>, and <code>npx</code> comes with <code>npm</code>. <strong>In order to use <code>npm</code> or <code>npx</code>, you need install <code>node.js</code>.</strong></p>
<pre tabindex="0"><code>Node.js installation
└── includes npm (Node Package Manager)
└── includes npx (Node Package Execute)
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npx create-react-app my-app
</span></span><span style="display:flex;"><span>npm install some-package
</span></span></code></pre></div><ul>
<li>NPM is a package manager for node.js, same as <code>pip</code> for python, <code>pnmp</code> is same as <code>npm</code>, but more efficient</li>
<li>npx 是 npm 的一个工具, 它允许我们直接运行 npm 包中的命令行工具, 而不需要全局安装这些工具</li>
<li><code>create-next-app@latest</code>: 是 Next.js 官方提供的脚手架工具(scaffolding tool), create-next-app 是工具的名称, @latest 表示使用最新版本</li>
</ul>
<p>举个例子来说明 npx 的作用:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 不使用 npx 的话,我们需要先全局安装</span>
</span></span><span style="display:flex;"><span>npm install -g create-next-app
</span></span><span style="display:flex;"><span>create-next-app my-project
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 使用 npx,可以直接运行而不需要安装</span>
</span></span><span style="display:flex;"><span>npx create-next-app@latest my-project
</span></span></code></pre></div><h2 id="pnpm">pnpm<a href="#pnpm" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<ul>
<li>自己的项目添加依赖, 运行 <code>pnpm add xxx</code>, 不要在项目外运行这个指令</li>
<li>克隆的别人的项目, 进入项目后, 运行 <code>pnpm install</code> 安装所有依赖</li>
<li>查看 pnpm store 路径 <code>pnpm store path</code></li>
<li>清除 pnpm stpre 缓存 <a href="https://pnpm.io/cli/store#prune"><code>pnpm store prune</code></a>: removes <em>unreferenced packages</em> from the store. Unreferenced packages are packages that are not used by any projects on the system. Packages can become unreferenced after most installation operations, for instance when dependencies are made redundant.</li>
<li>查看所在项目已安装的所有依赖 <code>pnpm list</code></li>
</ul>
<blockquote>
<p><code>pnpm add xxx</code> 虽然该命令会把依赖安装到 pnpm store 中, 但你仍应该在项目里运行这个指令, 而不是随意一个地方,</p>
<p><code>pnpm add xxx</code>  会在运行该指令的地方 添加三个文件 <code>package.json</code>, <code>pnpm-lock.yaml</code>, <code>node_modules</code>, 其中 <code>node_modules</code> 包含了通过符号链接指向 pnpm store 中实际依赖包的链接, pnpm 使用符号链接来节省磁盘空间</p>
</blockquote>
<p>其它用法, 类似 npm:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 开发模式</span>
</span></span><span style="display:flex;"><span>$ pnpm run dev    <span style="color:#75715e"># 启动开发服务器，实时编译，方便开发</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 生产模式</span>
</span></span><span style="display:flex;"><span>$ pnpm run build  <span style="color:#75715e"># 构建优化后的生产环境代码</span>
</span></span><span style="display:flex;"><span>$ pnpm start      <span style="color:#75715e"># 启动生产环境服务器</span>
</span></span></code></pre></div><p><code>pnpm run</code> is a command, and <code>dev</code>, <code>build</code>, and <code>start</code> are scripts/commands defined in your project&rsquo;s <code>package.json</code> file.</p>
<p>Here&rsquo;s how a typical package.json might look:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;your-project&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;scripts&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;dev&#34;</span>: <span style="color:#e6db74">&#34;next dev&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;build&#34;</span>: <span style="color:#e6db74">&#34;next build&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;next start&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>You can try add a custom scripts to package.json, like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;scripts&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">//...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#f92672">&#34;custom&#34;</span>: <span style="color:#e6db74">&#34;echo &#39;my custom script&#39;&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Then run: <code>pnpm run custom</code></p>
<p>了解更多:</p>
<ul>
<li><a href="https://pnpm.io/faq">Why does my <code>node_modules</code> folder use disk space if packages are stored in a global store?</a></li>
<li><a href="https://pnpm.io/motivation">How pnpm work</a></li>
</ul>
<h2 id="folder-structure-of-nextjs-project">folder structure of next.js project<a href="#folder-structure-of-nextjs-project" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<pre tabindex="0"><code>$ tree -a -L 1              
├── .next     # Auto-generated build output directory, created after running next build
├── next.config.ts       # Next.js configuration file in TypeScript
├── node_modules         # Dependencies installed by package manager (pnpm in this case)
├── package.json         # Project metadata and dependencies
├── public              # Static files served at runtime (images, fonts, etc.)
....
</code></pre><h2 id="learn-to-understand-warnings">learn to understand warnings<a href="#learn-to-understand-warnings" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ pnpm i @vercel/postgres
</span></span><span style="display:flex;"><span>WARN Issues with peer dependencies found
</span></span><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>└─┬ next 15.0.0
</span></span><span style="display:flex;"><span>  ├── ✕ unmet peer react@<span style="color:#e6db74">&#34;^18.2.0 || 19.0.0-rc-65a56d0e-20241020&#34;</span>: found 19.0.0-rc-cd22717c-20241013
</span></span><span style="display:flex;"><span>  └── ✕ unmet peer react-dom@<span style="color:#e6db74">&#34;^18.2.0 || 19.0.0-rc-65a56d0e-20241020&#34;</span>: found 19.0.0-rc-cd22717c-20241013
</span></span><span style="display:flex;"><span>Done in 1.2s
</span></span></code></pre></div><ul>
<li>&ldquo;peer dependencies&rdquo; 通常翻译为&quot;同级依赖&quot;, 它表示一个包要求宿主环境中必须安装特定的其他包才能正常工作, 举个例子：如果你安装一个 React 组件库, 若它将 React 列为 peer dependency, 这意味着这个组件库期望你的项目中已经安装了 React, 而不是它自己携带一个 React 副本</li>
<li><code>unmet peer react@&quot;^18.2.0 || 19.0.0-rc-65a56d0e-20241020&quot;: found 19.0.0-rc-cd22717c-20241013</code>: 这个包（Next.js）要求项目使用的 React 版本必须是：应该为 18.2.0 或更高的 18.x 版本（ <code>^18.2.0</code> ）或者是特定的 RC 版本 <code>19.0.0-rc-65a56d0e-20241020</code>, 但是在项目中找到的是另一个 RC 版本：<code>19.0.0-rc-cd22717c-20241013</code>, 版本不匹配，所以系统发出警告</li>
</ul>

      </div></div>

  
    
<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h">查看其他文章</span>
    <hr />
  </div>
  <div class="pagination__buttons">
    
      <a href="https://blog.jiyi27.com/posts/frontend/next-js/004-next-auth/" class="button inline prev">
        NextAuth V5
      </a>
    
    
      ::
    
    
      <a href="https://blog.jiyi27.com/posts/frontend/next-js/003-ssr-csr-seo/" class="button inline next">
        SSR vs CSR
      </a>
    
  </div>
</div>


  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/jiyi27/jiyi27.github.io" target="_blank">Theme</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
