<!DOCTYPE html>
<html lang="en">
<head>
  
    
    <title>Render Phases - React.js :: ä¸ºéœœçš„åšå®¢</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="ä¸€ç¯‡æ–‡ç« æ€»ç»“çš„æ¯”è¾ƒå¥½, æ¸²æŸ“çš„ä¸¤ä¸ªé˜¶æ®µ: Render, Commit:
Render
construction of sub React-tree by recursively calling the React component function body (or the render method on class components)- in this article we call this update phase. passing this React-tree to the renderer that will figure out whatâ€™s sections of the DOM needs to be updated. Commit
the renderer updates the DOM using Reactâ€™s â€œdiffingâ€ algorithm. now the browser DOM is fully updated in memory but the browser has not painted it to the UI(the event loop has not yet ended). means that any access to the DOM here will get the updated DOM properties(such location and dimensions), but changes has not flushed to the UI just yet. useLayoutEffect cleanup from previous render useLayoutEffect is now called. javascript event loop has ended, and the browser paints the updated DOM (the UI is fully updated). useEffect cleanup from previous render useEffect is now called (asynchronously). æ³¨æ„è¿™é‡Œçš„ useEffect cleanup from previous render, æ¸…ç†å®é™…ä¸ŠæŒ‡çš„æ˜¯ æ‰§è¡Œ useEffect è¿”å›çš„å‡½æ•°, å³ useEffect å‡½æ•°ä½“ä¼šåœ¨ commit é˜¶æ®µæ‰§è¡Œç„¶åè¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•°(å¯é€‰), åœ¨ä¸‹æ¬¡ commit é˜¶æ®µæ—¶, React ä¼šå…ˆè°ƒç”¨ä¸Šæ¬¡ useEffect è¿”å›çš„æ¸…ç†å‡½æ•°, ç„¶åå†æ‰§è¡Œ useEffect,
" />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://blog.jiyi27.com/posts/frontend/next-js/005-render-phases-useeffect-react/" />





  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/categories.min.3202f75cbb294747099af3850a68a09ee94b3ce505fc39e134692d90ff0a9b2a.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/code.min.dd73d157e77e82a3dc1cb06ba424cf6cc6811af0bb604ad6c68e70faf2439c8a.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/fonts.min.4881f0c525f3ce2a1864fb6e96676396cebe1e6fcef1933e8e1dde7041004fb5.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/main.min.3fb8954e26342ad3afabb4525959bfec6f9fc0d6929f0dda738ddeee30211690.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/menu.min.8cee75f73b9f9b1e40bd0dd53e6e770156b08bbfe1c579cd256c3f6cd3b6d32b.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/post.min.014a50745fbdd41d5f420a3e288730d5af4b7d90344dc6211d0e50c368b5b303.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/prism.min.b958d3d7c6c67361b945f9062d07d403422604b3d2cd33f93b88d41ed0ba634d.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/term.min.94de320c1b850e126e6d2c88a7c90acf58bb1313f0ea14a14cda2a42f2a88db2.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">


<link rel="stylesheet" href="https://blog.jiyi27.com/terminal.css">




<link rel="shortcut icon" href="https://blog.jiyi27.com/favicon.png">
<link rel="apple-touch-icon" href="https://blog.jiyi27.com/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Render Phases - React.js">
<meta property="og:description" content="ä¸€ç¯‡æ–‡ç« æ€»ç»“çš„æ¯”è¾ƒå¥½, æ¸²æŸ“çš„ä¸¤ä¸ªé˜¶æ®µ: Render, Commit:
Render
construction of sub React-tree by recursively calling the React component function body (or the render method on class components)- in this article we call this update phase. passing this React-tree to the renderer that will figure out whatâ€™s sections of the DOM needs to be updated. Commit
the renderer updates the DOM using Reactâ€™s â€œdiffingâ€ algorithm. now the browser DOM is fully updated in memory but the browser has not painted it to the UI(the event loop has not yet ended). means that any access to the DOM here will get the updated DOM properties(such location and dimensions), but changes has not flushed to the UI just yet. useLayoutEffect cleanup from previous render useLayoutEffect is now called. javascript event loop has ended, and the browser paints the updated DOM (the UI is fully updated). useEffect cleanup from previous render useEffect is now called (asynchronously). æ³¨æ„è¿™é‡Œçš„ useEffect cleanup from previous render, æ¸…ç†å®é™…ä¸ŠæŒ‡çš„æ˜¯ æ‰§è¡Œ useEffect è¿”å›çš„å‡½æ•°, å³ useEffect å‡½æ•°ä½“ä¼šåœ¨ commit é˜¶æ®µæ‰§è¡Œç„¶åè¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•°(å¯é€‰), åœ¨ä¸‹æ¬¡ commit é˜¶æ®µæ—¶, React ä¼šå…ˆè°ƒç”¨ä¸Šæ¬¡ useEffect è¿”å›çš„æ¸…ç†å‡½æ•°, ç„¶åå†æ‰§è¡Œ useEffect,
" />
<meta property="og:url" content="https://blog.jiyi27.com/posts/frontend/next-js/005-render-phases-useeffect-react/" />
<meta property="og:site_name" content="ä¸ºéœœçš„åšå®¢" />

  <meta property="og:image" content="https://blog.jiyi27.com/og-image.png">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">

  <meta property="article:section" content="å‰ç«¯å¼€å‘" />


  <meta property="article:published_time" content="2024-12-16 23:38:39 &#43;0000 UTC" />












</head>
<body>


<div class="container center">

  
  
  

  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://blog.jiyi27.com/posts/frontend/next-js/005-render-phases-useeffect-react/">Render Phases - React.js</a>
  </h1>
  <div class="post-meta"><time class="post-date">2024-12-16</time><span class="post-reading-time">3 åˆ†é’Ÿé˜…è¯» (480 å­—æ•°)</span></div>

  
    <span class="post-tags">
      
      #<a href="https://blog.jiyi27.com/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">å‰ç«¯å¼€å‘</a>&nbsp;
      
      #<a href="https://blog.jiyi27.com/tags/next.js/">next.js</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <p><a href="https://eliav2.github.io/how-react-hooks-work/">ä¸€ç¯‡æ–‡ç« </a>æ€»ç»“çš„æ¯”è¾ƒå¥½, æ¸²æŸ“çš„ä¸¤ä¸ªé˜¶æ®µ: Render, Commit:</p>
<p><strong>Render</strong></p>
<ul>
<li>construction of sub React-tree by recursively calling the React component function body (or the render method on class components)- in this article we call this <strong>update phase</strong>.</li>
<li>passing this React-tree to the renderer that will figure out whatâ€™s sections of the DOM needs to be updated.</li>
</ul>
<p><strong>Commit</strong></p>
<ul>
<li>the renderer updates the DOM using <a href="https://reactjs.org/docs/reconciliation.html#the-diffing-algorithm">Reactâ€™s â€œdiffingâ€ algorithm</a>.</li>
<li>now the browser DOM is fully updated in memory but the browser has not painted it to the UI(the event loop has not yet ended). means that any access to the DOM here will get the updated DOM properties(such location and dimensions), but changes has not flushed to the UI just yet.</li>
<li><em>useLayoutEffect cleanup from previous render</em></li>
<li><strong><a href="https://reactjs.org/docs/hooks-reference.html#uselayouteffect">useLayoutEffect</a></strong> is now called.</li>
<li>javascript event loop has ended, and the browser paints the updated DOM (the UI is fully updated).</li>
<li><em>useEffect cleanup from previous render</em></li>
<li><strong><a href="https://reactjs.org/docs/hooks-reference.html#useeffect">useEffect</a></strong> is now called (asynchronously).</li>
</ul>
<p>æ³¨æ„è¿™é‡Œçš„ <code>useEffect cleanup from previous render</code>, æ¸…ç†å®é™…ä¸ŠæŒ‡çš„æ˜¯ æ‰§è¡Œ useEffect è¿”å›çš„å‡½æ•°,  å³ useEffect å‡½æ•°ä½“ä¼šåœ¨ commit é˜¶æ®µæ‰§è¡Œç„¶åè¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•°(å¯é€‰), åœ¨ä¸‹æ¬¡ commit é˜¶æ®µæ—¶, React ä¼šå…ˆè°ƒç”¨ä¸Šæ¬¡ useEffect è¿”å›çš„æ¸…ç†å‡½æ•°, ç„¶åå†æ‰§è¡Œ useEffect,</p>
<p>è¿”å›æ¸…ç†å‡½æ•°å¯ä»¥é˜²æ­¢å†…å­˜æ³„æ¼, ä¸è¦å¿˜äº†, useEffect æ˜¯ç”¨æ¥æ‰§è¡Œå‰¯ä½œç”¨çš„åœ°æ–¹, æ¯”å¦‚æˆ‘ä»¬å¯èƒ½åœ¨ useEffect ä¸­å»ºç«‹äº† TCP è¿æ¥, ç»„ä»¶å¤šæ¬¡æ¸²æŸ“, æˆ‘ä»¬å»ºç«‹å¤šä¸ªTCPè¿æ¥, å¯æ˜¯åŒæ—¶åªä¿å­˜ä¸€ä¸ªè¿æ¥æ‰æ˜¯åˆç†çš„, è¿™æ—¶å€™æ¸…ç†ä¹‹å‰çš„, å°±æ˜¾å¾—å¾ˆå¿…è¦:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// 1. æ•°æ®è·å– - æœ€å¸¸è§çš„ç”¨ä¾‹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">UserProfile</span> <span style="color:#f92672">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">useEffect</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// å®šä¹‰å¼‚æ­¥å‡½æ•°æ¥è·å–ç”¨æˆ·æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fetchUser</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">async</span> () =&gt; {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">&#39;https://api.example.com/user&#39;</span>);
</span></span><span style="display:flex;"><span>      ...
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fetchUser</span>();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// æ¸…ç†å‡½æ•° - ç»„ä»¶å¸è½½æ—¶å–æ¶ˆè¯·æ±‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> () =&gt; {
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// å¦‚æœä½¿ç”¨ axiosï¼Œå¯ä»¥ç”¨ cancelToken
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#75715e">// å¦‚æœä½¿ç”¨ AbortControllerï¼Œå¯ä»¥åœ¨è¿™é‡Œ abort
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    };
</span></span><span style="display:flex;"><span>  }, []); <span style="color:#75715e">// ç©ºä¾èµ–æ•°ç»„æ„å‘³ç€åªåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">loading</span> <span style="color:#f92672">?</span> <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span><span style="color:#f92672">&gt;</span><span style="color:#a6e22e">Loading</span>...<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt; : &lt;div&gt;{user?.name}&lt;/div&gt;;</span>
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>åˆæˆ–è€…æ˜¯å®šæ—¶å™¨, æœ‰å¯èƒ½å‘ç”Ÿçš„æ˜¯, ä¸Šæ¬¡æ¸²æŸ“å› è°ƒç”¨ useEffect å¯åŠ¨çš„å®šæ—¶å™¨è¿˜æ²¡ç»“æŸ, åˆå‘ç”Ÿäº†ä¸€æ¬¡æ–°çš„æ¸²æŸ“, æ­¤æ—¶åœ¨è°ƒç”¨ useEffect ä¹‹å‰, æ¸…ç†æ‰ä¹‹å‰çš„çš„å®šæ—¶å™¨:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// 2. ç›‘å¬çŠ¶æ€å˜åŒ– - å“åº”ç‰¹å®šçŠ¶æ€çš„å˜åŒ–
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">SearchComponent</span> <span style="color:#f92672">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">searchTerm</span>, <span style="color:#a6e22e">setSearchTerm</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useState</span>(<span style="color:#e6db74">&#39;&#39;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">results</span>, <span style="color:#a6e22e">setResults</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useState</span>([]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">useEffect</span>(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// é˜²æŠ–å¤„ç†ï¼Œé¿å…é¢‘ç¹è¯·æ±‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">debounceTimeout</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">setTimeout</span>(<span style="color:#66d9ef">async</span> () =&gt; {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">searchTerm</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">2</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">`/api/search?q=</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">searchTerm</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }, <span style="color:#ae81ff">500</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// æ¸…ç†å‡½æ•° - å–æ¶ˆä¹‹å‰çš„å»¶æ—¶æ“ä½œ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> () =&gt; <span style="color:#a6e22e">clearTimeout</span>(<span style="color:#a6e22e">debounceTimeout</span>);
</span></span><span style="display:flex;"><span>  }, [<span style="color:#a6e22e">searchTerm</span>]); <span style="color:#75715e">// ä¾èµ–äº searchTermï¼Œæ¯æ¬¡æœç´¢è¯å˜åŒ–éƒ½ä¼šè§¦å‘
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">input</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">searchTerm</span>}
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">onChange</span><span style="color:#f92672">=</span>{(<span style="color:#a6e22e">e</span>) =&gt; <span style="color:#a6e22e">setSearchTerm</span>(<span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">value</span>)}
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ol>
<li>ç”¨æˆ·å¿«é€Ÿè¾“å…¥ abc</li>
<li>SearchComponent è¢«æ¸²æŸ“ä¸‰æ¬¡, å› ä¸º searchTerm æ”¹å˜äº†ä¸‰æ¬¡, a -&gt; ab -&gt; abc</li>
<li>è¾“å…¥bçš„æ—¶å€™, ç»„ä»¶è¢«é‡æ–°æ¸²æŸ“( render é˜¶æ®µ), React æ‰§è¡Œä¸Šæ¬¡ useEffect è¿”å›çš„æ¸…ç†å‡½æ•°(commit é˜¶æ®µ), å³ å®šæ—¶å™¨è¢«æ¸…ç†, è¯·æ±‚ä¹Ÿä¸ä¼šå‘å‡º</li>
<li>è¾“å‡º c, æ­¤æ—¶ç»„ä»¶é‡æ–°è¢«æ¸²æŸ“, åŒç†, æ‰§è¡Œæ¸…ç†å‡½æ•°, å†æ¬¡è°ƒç”¨ useEffect, å³åªä¼šæ‰§è¡Œä¸€æ¬¡è¯·æ±‚</li>
</ol>
<hr>
<p>éƒ½çŸ¥é“, åœ¨ Render Phase å·²ç»å®Œæˆäº†æ‰€æœ‰æ•°æ®çš„è®¡ç®—å’Œå®Œæ•´çš„ Virtual DOM çš„ç”Ÿæˆ, Commit Phase åˆ™è´Ÿè´£æŠŠè¿™äº›å˜æ›´å®é™…åº”ç”¨åˆ°æµè§ˆå™¨çš„ DOM ä¸­, å¹¶å¤„ç†å‰¯ä½œç”¨ useEffect,</p>
<p>å¯æ˜¯æœ‰ä¸ªé—®é¢˜, ç»„ä»¶å·²ç»æ¸²æŸ“å®Œäº†, å†æ‰§è¡Œ useEffect è¿˜æœ‰ä»€ä¹ˆæ„ä¹‰å‘¢, useEffect ä¸å°±æ˜¯ä¸ºäº†æ‹‰å–æ•°æ® ç„¶åæ’å…¥åˆ°ç»„ä»¶å—? çœ‹ä¾‹å­:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">UserProfile() {</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">user</span>, <span style="color:#a6e22e">setUser</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useState</span>(<span style="color:#66d9ef">null</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// ç¬¬ä¸€æ¬¡æ¸²æŸ“
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;1. Render Phase æ‰§è¡Œ&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">content</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">user</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">?</span> &lt;<span style="color:#f92672">h1</span>&gt;<span style="color:#a6e22e">Welcome</span>, {<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">name</span>}&lt;/<span style="color:#f92672">h1</span>&gt; 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">:</span> &lt;<span style="color:#f92672">h1</span>&gt;<span style="color:#a6e22e">Loading</span>...&lt;/<span style="color:#f92672">h1</span>&gt;;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">useEffect</span>(() <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;3. Commit Phase ä¹‹åæ‰§è¡Œ Effect&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// è·å–æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">&#39;/api/user&#39;</span>)
</span></span><span style="display:flex;"><span>      .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">r</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">json</span>())
</span></span><span style="display:flex;"><span>      .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">userData</span> <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;4. æ•°æ®åˆ°è¾¾ï¼Œè°ƒç”¨ setUser&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">setUser</span>(<span style="color:#a6e22e">userData</span>);
</span></span><span style="display:flex;"><span>      });
</span></span><span style="display:flex;"><span>  }, []);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;2. è¿”å› JSX&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">content</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æ‰§è¡Œçš„é€»è¾‘æ˜¯</p>
<ol>
<li>ç»„ä»¶é¦–æ¬¡æ¸²æŸ“ï¼Œæ˜¾ç¤º &ldquo;Loading&hellip;&rdquo;</li>
<li>DOM æ›´æ–°å®Œæˆ</li>
<li>useEffect æ‰§è¡Œï¼Œå‘èµ· API è¯·æ±‚</li>
<li>æ•°æ®è¿”å›åï¼ŒsetUser è§¦å‘æ–°çš„æ¸²æŸ“</li>
<li>ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œè¿™æ¬¡æ˜¾ç¤º &ldquo;Welcome, [name]&rdquo;</li>
</ol>
<p>æ‰€ä»¥ useEffect ä¸æ˜¯ä¸ºäº†&quot;æŠŠæ•°æ®æ’å…¥å·²æ¸²æŸ“çš„è§†å›¾&quot;ï¼Œè€Œæ˜¯ï¼š</p>
<ol>
<li>è§¦å‘ä¸€ä¸ªæ–°çš„æ•°æ®è·å–æµç¨‹</li>
<li>é€šè¿‡ setState å¼•å‘æ–°çš„<strong>æ¸²æŸ“å‘¨æœŸ</strong></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#75715e">// ğŸš« é”™è¯¯ç†è§£ï¼šè§†å›¾æ˜¯ä¸ªæ¡†æ¶ï¼Œç­‰ç€æ•°æ®å¡«å……
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;user&#34;</span>&gt;{<span style="color:#960050;background-color:#1e0010">ç­‰å¾…</span> <span style="color:#a6e22e">useEffect</span> <span style="color:#960050;background-color:#1e0010">å¡«å……æ•°æ®</span>}&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// âœ… æ­£ç¡®ç†è§£ï¼šæ¯æ¬¡éƒ½æ˜¯å®Œæ•´çš„æ¸²æŸ“
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// ç¬¬ä¸€æ¬¡æ¸²æŸ“
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;user&#34;</span>&gt;<span style="color:#a6e22e">Loading</span>...&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æ•°æ®åˆ°è¾¾åçš„ç¬¬äºŒæ¬¡æ¸²æŸ“
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;user&#34;</span>&gt;<span style="color:#a6e22e">Welcome</span>, <span style="color:#a6e22e">Alice</span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span></code></pre></div><p>useEffect çš„ä¾èµ–æ˜¯ç©ºæ•°ç»„, è¡¨ç¤ºåªåœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“åæ‰§è¡Œä¸€æ¬¡, ä¹‹åä¸ä¼šå†æ‰§è¡Œ,</p>

      </div></div>

  
    
<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h">æŸ¥çœ‹å…¶ä»–æ–‡ç« </span>
    <hr />
  </div>
  <div class="pagination__buttons">
    
      <a href="https://blog.jiyi27.com/posts/database/postgres/001-postgres-basics/" class="button inline prev">
        PostgreSQL å¸¸ç”¨å‘½ä»¤
      </a>
    
    
      ::
    
    
      <a href="https://blog.jiyi27.com/posts/frontend/next-js/009-definitions-react/" class="button inline next">
        Definitions in React
      </a>
    
  </div>
</div>


  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/jiyi27/jiyi27.github.io" target="_blank">Theme</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
